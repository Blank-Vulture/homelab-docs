{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Homelab \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<p>\u30b2\u30fc\u30df\u30f3\u30b0\u6700\u9069\u5316\u30fb\u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u30fb\u5c06\u6765\u62e1\u5f35\u3092\u76ee\u6a19\u3068\u3057\u305f\u30db\u30fc\u30e0\u30e9\u30dc\u306e\u30a4\u30f3\u30d5\u30e9\u8a2d\u8a08\u30fb\u69cb\u7bc9\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3002</p> <pre><code>flowchart TB\n    INET[\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8] --&gt; ONU[ONU]\n    ONU --&gt; FW[OPNsense FW]\n    FW --&gt;|SFP+ 1| CORE[CRS305 \u57fa\u5e79SW]\n    FW --&gt;|SFP+ 2| DMZSW[CRS305 DMZ SW&lt;br/&gt;SwOS]\n    CORE --&gt; ACCESS[CRS328 Access SW]\n    CORE --&gt; LAB[CRS309 Lab SW]\n    DMZSW --&gt; DMZ[PVE-DMZ-1]\n    ACCESS --&gt; GAME[Gaming VLAN10]\n    ACCESS --&gt; WIFI[WiFi VLAN20/21]\n    LAB --&gt; SERVERS[Proxmox Cluster]\n    LAB --&gt; GPU[GPU PC / LLM]</code></pre>"},{"location":"#_1","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af","text":"<ul> <li> <p> \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</p> <p>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5168\u4f53\u8a2d\u8a08\u3001\u591a\u5c64\u9632\u5fa1\u3001\u8a2d\u8a08\u539f\u5247</p> <p> \u8a73\u7d30</p> </li> <li> <p> VLAN\u8a2d\u8a08</p> <p>9 VLAN\u69cb\u6210\u3001\u901a\u4fe1\u30eb\u30fc\u30eb\u3001WiFi SSID\u4e00\u89a7</p> <p> \u8a73\u7d30</p> </li> <li> <p> IP\u30a2\u30c9\u30ec\u30b9\u5272\u308a\u5f53\u3066</p> <p>\u5168\u30c7\u30d0\u30a4\u30b9\u30fb\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u4e00\u89a7</p> <p> \u975e\u516c\u958b</p> </li> </ul>"},{"location":"#_2","title":"\u30a4\u30f3\u30d5\u30e9","text":"<ul> <li> <p> \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2</p> <p>Proxmox\u30ce\u30fc\u30c9\u3001\u30b9\u30a4\u30c3\u30c1\u3001FW\u3001NIC\u69cb\u6210\u3001\u8cfc\u5165\u4e88\u7b97</p> <p> \u8a73\u7d30</p> </li> <li> <p> \u30b5\u30fc\u30d3\u30b9\u4e00\u89a7</p> <p>\u7a3c\u50cd\u30b3\u30f3\u30c6\u30ca\u3001\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u3001\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u69cb\u6210</p> <p> \u975e\u516c\u958b</p> </li> <li> <p> \u30ed\u30fc\u30ab\u30ebLLM</p> <p>GPU\u5c02\u7528PC (HP Z8 G4)\u3001\u63a8\u8ad6\u30a8\u30f3\u30b8\u30f3\u3001\u30e2\u30c7\u30eb\u9078\u5b9a</p> <p> \u8a73\u7d30</p> </li> </ul>"},{"location":"#_3","title":"\u904b\u7528","text":"<ul> <li> <p> ADR (\u610f\u601d\u6c7a\u5b9a\u8a18\u9332)</p> <p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u4e0a\u306e\u91cd\u8981\u306a\u6c7a\u5b9a\u3068\u305d\u306e\u6839\u62e0</p> <p> \u8a73\u7d30</p> </li> <li> <p> Runbooks (\u904b\u7528\u624b\u9806\u66f8)</p> <p>\u969c\u5bb3\u5fa9\u65e7\u3001VM\u8ffd\u52a0\u3001\u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\u306a\u3069\u306e\u624b\u9806\u66f8</p> <p> \u8a73\u7d30</p> </li> </ul>"},{"location":"architecture/","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u6700\u7d42\u66f4\u65b0: 2026-02-13\uff08\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u8cac\u52d9\u5206\u96e2\u3001Tailscale \u5168PVE\u914d\u7f6e\u3001VLAN 240 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8ffd\u52a0\u30013\u5c64\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u8a08\u3001DMZ\u7269\u7406\u5206\u96e2\uff09</p>"},{"location":"architecture/#_2","title":"\u6982\u8981","text":"<p>\u30b2\u30fc\u30df\u30f3\u30b0\u6700\u9069\u5316\u30fb\u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u30fb\u5c06\u6765\u62e1\u5f35\u3092\u76ee\u6a19\u3068\u3057\u305f\u30db\u30fc\u30e0\u30e9\u30dc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3002 OPNsense\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u4e2d\u5fc3\u306b\u3001MikroTik\u30b9\u30a4\u30c3\u30c1\u3067VLAN\u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3001 Proxmox\u30af\u30e9\u30b9\u30bf\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u904b\u7528\u3059\u308b\u3002</p> <p>\u5c06\u6765\u7684\u306a10Gbps WAN\u63a5\u7d9a\u3092\u8996\u91ce\u306b\u5165\u308c\u3001\u5185\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f10Gbps SFP+\u57fa\u76e4\u3067\u69cb\u7bc9\u3002</p>"},{"location":"architecture/#_3","title":"\u5168\u4f53\u69cb\u6210\u56f3","text":"<pre><code>flowchart TB\n    INET[\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8] --&gt; ONU[ONU]\n    ONU --&gt; FW[Protectli VP2440&lt;br/&gt;OPNsense FW / IDS / QoS&lt;br/&gt;2x 10G SFP+, 2x 2.5GbE]\n    FW --&gt;|SFP+ 1&lt;br/&gt;10Gbps| CORE[CRS305-1G-4S+&lt;br/&gt;\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1]\n    FW --&gt;|SFP+ 2&lt;br/&gt;10Gbps| DMZSW[CRS305-1G-4S+&lt;br/&gt;DMZ\u30b9\u30a4\u30c3\u30c1&lt;br/&gt;SwOS]\n\n    CORE --&gt;|10Gbps| ACCESS[CRS328-24P-4S+&lt;br/&gt;\u30a2\u30af\u30bb\u30b9\u30b9\u30a4\u30c3\u30c1 PoE]\n    CORE --&gt;|10Gbps| LABSW[CRS309-1G-8S+&lt;br/&gt;\u30e9\u30dc\u30b9\u30a4\u30c3\u30c1]\n\n    ACCESS --&gt; GAME[VLAN10: Gaming&lt;br/&gt;Planex FX2G-05EM2]\n    ACCESS --&gt; HOME_WIFI[VLAN20: Home WiFi&lt;br/&gt;Ubiquiti U7 Pro]\n    ACCESS --&gt; FATHER[VLAN21: Father \u9694\u96e2&lt;br/&gt;ASUS GT-AX11000]\n    ACCESS --&gt; IOT[VLAN30: IoT]\n    ACCESS --&gt;|1GbE VLAN240| BACKUP[backup-node&lt;br/&gt;VLAN240: Backup&lt;br/&gt;PULL\u578b, inbound 0]\n\n    LABSW --&gt; PVE1[PVE-1&lt;br/&gt;CPU\u30ef\u30fc\u30ab\u30fc, 82599ES]\n    LABSW --&gt; PVE2[PVE-2&lt;br/&gt;CPU\u30ef\u30fc\u30ab\u30fc, 82599ES]\n    LABSW --&gt; PVE3[PVE-3&lt;br/&gt;M75q Gen5, CX-6 Lx&lt;br/&gt;Lab CP]\n    LABSW --&gt; PVEGPU[PVE-GPU&lt;br/&gt;HP Z8 G4&lt;br/&gt;RTX 3080\u00d72 + 2080Ti&lt;br/&gt;\u30ed\u30fc\u30ab\u30ebLLM]\n\n    DMZSW --&gt; PVED1[PVE-DMZ-1&lt;br/&gt;M90q Gen5&lt;br/&gt;FIPS TPM]\n    DMZSW -.-&gt; PVED2[PVE-DMZ-2&lt;br/&gt;\u5c06\u6765\u62e1\u5f35]\n\n    BACKUP -.-&gt;|SSH PULL| PVE1\n    BACKUP -.-&gt;|SSH PULL| PVE2\n    BACKUP -.-&gt;|SSH PULL| PVE3\n    BACKUP --&gt;|HTTPS| R2[Cloudflare R2&lt;br/&gt;Object Lock]\n    BACKUP --&gt;|HTTPS| GH[GitHub Private&lt;br/&gt;\u6697\u53f7\u5316\u30df\u30e9\u30fc]\n\n    FRIENDS[\u53cb\u4eba/\u5916\u51fa\u5148] -.-&gt;|Cloudflare WARP&lt;br/&gt;Zero Trust| CF\n    CF[Cloudflare ZT] -.-&gt;|Tunnel&lt;br/&gt;\u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3| PVE1\n\n    MGMT[\u7ba1\u7406\u7aef\u672b&lt;br/&gt;VLAN 90] -.-&gt;|Tailscale&lt;br/&gt;\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3| PVE1\n    MGMT -.-&gt;|Tailscale| PVE2\n    MGMT -.-&gt;|Tailscale| PVE3\n    MGMT -.-&gt;|Tailscale| PVEGPU\n    MGMT -.-&gt;|Tailscale| PVED1\n\n    style BACKUP fill:#2d5016,stroke:#4a8c2a,color:#fff\n    style FRIENDS fill:#1a3a5c,stroke:#2d6aa0,color:#fff\n    style MGMT fill:#5c1a3a,stroke:#a02d6a,color:#fff\n    style DMZSW fill:#5c3a1a,stroke:#a06a2d,color:#fff</code></pre>"},{"location":"architecture/#_4","title":"\u8a2d\u8a08\u539f\u5247","text":"\u539f\u5247 \u8aac\u660e \u30bc\u30ed\u30c8\u30e9\u30b9\u30c8 VLAN\u9593\u306f\u660e\u793a\u7684\u306b\u8a31\u53ef\u3057\u305f\u901a\u4fe1\u306e\u307f\u901a\u904e\uff08\u7ba1\u7406VLAN\u3082\u4f8b\u5916\u306a\u3057\uff09 \u30b2\u30fc\u30e0\u6700\u512a\u5148 CAKE QoS\u3067\u30b2\u30fc\u30e0\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6700\u512a\u5148 \u7236\u306e\u9694\u96e2 ASUS GT-AX11000\u3067\u4e8c\u91cdNAT + AI\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u5197\u9577\u5316 Ceph 3\u30ce\u30fc\u30c9\u69cb\u6210\u30671\u53f0\u6545\u969c\u3057\u3066\u3082\u7d99\u7d9a \u5c06\u6765\u62e1\u5f35 10Gbps\u57fa\u76e4\u3067\u6a5f\u5668\u8ffd\u52a0\u304c\u5bb9\u6613\u3001CP\u306eCX-6 Lx\u306f25GbE\u5bfe\u5fdc\u6e08\u307f 10Gbps WAN\u5bfe\u5fdc FW\u306b10G SFP+\u642d\u8f09\u3001\u5c06\u6765\u306e\u56de\u7dda\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u5099\u3048\u308b 3\u5c64\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 Lab (Ceph) + \u72ec\u7acb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 + \u30aa\u30d5\u30b5\u30a4\u30c8 (R2/GitHub) PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306f\u81ea\u3089\u53d6\u308a\u306b\u884c\u304f\u3002PVE\u304b\u3089\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3078\u306e\u901a\u4fe1\u306f\u5168\u62d2\u5426 \u5916\u90e8\u30a2\u30af\u30bb\u30b9\u8cac\u52d9\u5206\u96e2 CF ZT = \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3\uff08\u30b5\u30fc\u30d3\u30b9\u5229\u7528\uff09\u3001Tailscale = \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\uff08\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406\uff09\u3002\u8cac\u52d9\u3092\u5206\u96e2\u3057\u4e00\u65b9\u306e\u4fb5\u5bb3\u304c\u4ed6\u65b9\u306b\u6ce2\u53ca\u3057\u306a\u3044\u8a2d\u8a08\u3002WAN\u30dd\u30fc\u30c8\u958b\u653e\u30bc\u30ed \u7ba1\u7406\u64cd\u4f5c\u5206\u96e2 \u7ba1\u7406\u7aef\u672b (VLAN 90) \u3092\u7269\u7406\u5206\u96e2\u3002\u30b2\u30fc\u30df\u30f3\u30b0PC\u306b\u7ba1\u7406\u6a29\u9650\u3092\u4e00\u5207\u7f6e\u304b\u306a\u3044 DMZ \u7269\u7406\u5206\u96e2 DMZ \u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u3092 FW \u306b\u76f4\u7d50\u3002DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u901a\u904e\u3057\u306a\u3044\u7269\u7406\u5206\u96e2\u69cb\u6210"},{"location":"architecture/#_5","title":"\u591a\u5c64\u9632\u5fa1","text":"<ol> <li>Layer 1: Cloudflare\uff08DDoS\u9632\u5fa1\u3001WAF\u3001\u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u30a2\u30af\u30bb\u30b9\uff09</li> <li>Layer 2: OPNsense on Protectli VP2440\uff08\u30b9\u30c6\u30fc\u30c8\u30d5\u30ebFW\u3001IDS/IPS Suricata\u3001CAKE QoS\u3001coreboot\uff09</li> <li>Layer 3: VLAN\u5206\u96e2 + \u7269\u7406\u5206\u96e2\uff08\u7528\u9014\u5225\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001DMZ\u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u3067FW\u76f4\u7d50\u3001\u5fc5\u8981\u901a\u4fe1\u306e\u307f\u8a31\u53ef\uff09</li> <li>Layer 4: \u30c7\u30d0\u30a4\u30b9\u30ec\u30d9\u30eb\uff08ASUS AI\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001Tailscale E2E\u6697\u53f7\u5316\u3001FIPS TPM\uff09</li> <li>Layer 5: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u9694\u96e2\uff08VLAN 240\u3001PULL\u578b\u3001append-only\u3001\u6574\u5408\u6027\u691c\u8a3c\uff09</li> </ol>"},{"location":"architecture/#_6","title":"\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u8a2d\u8a08\u6839\u62e0: ADR-004</p> <p>\u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3\uff08\u30b5\u30fc\u30d3\u30b9\u5229\u7528\uff09\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\uff08\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406\uff09\u3092\u7570\u306a\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u5206\u96e2\u3059\u308b\u3002</p> \u30d7\u30ec\u30fc\u30f3 \u30b7\u30b9\u30c6\u30e0 \u7528\u9014 \u5229\u7528\u8005 \u30c7\u30fc\u30bf Cloudflare Zero Trust Web UI\u3001\u30b2\u30fc\u30e0\u63a5\u7d9a\u3001Grafana\u95b2\u89a7 \u81ea\u5206\u30fb\u6bcd\u30fb\u53cb\u4eba \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb Tailscale (SaaS) SSH\u3001PVE WebUI\u3001Grafana\u7ba1\u7406 \u7ba1\u7406\u8005\u306e\u307f"},{"location":"architecture/#tailscale","title":"Tailscale \u914d\u7f6e","text":"\u30ce\u30fc\u30c9 Tailscale \u7528\u9014 \u5168PVE\u30d9\u30a2\u30e1\u30bf\u30eb (5\u53f0) \u3042\u308a 1\u53f0\u3067\u3082\u751f\u5b58\u3059\u308c\u3070\u7ba1\u7406\u30fb\u5fa9\u65e7\u53ef\u80fd \u7ba1\u7406\u7aef\u672b (VLAN 90) \u3042\u308a \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 VM / LXC \u306a\u3057 PVE\u30b3\u30f3\u30bd\u30fc\u30eb\u7d4c\u7531\u3067\u5230\u9054\u53ef\u80fd backup-node \u306a\u3057 VLAN 240 \u9694\u96e2\u539f\u5247\u3092\u7dad\u6301"},{"location":"architecture/#_7","title":"\u5206\u96e2\u306e\u52b9\u679c","text":"\u4fb5\u5bb3\u30b7\u30ca\u30ea\u30aa \u5f71\u97ff\u7bc4\u56f2 CF \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3 \u30b5\u30fc\u30d3\u30b9\u7d4c\u8def\u306e\u307f\u3002\u7ba1\u7406\u30d7\u30ec\u30fc\u30f3\uff08Tailscale\uff09\u306f\u7121\u50b7 Tailscale \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3 \u7ba1\u7406\u7d4c\u8def\u306e\u307f\u3002ACL + SSH\u516c\u958b\u9375\u8a8d\u8a3c\u3067\u88ab\u5bb3\u9650\u5b9a CF \u5927\u898f\u6a21\u969c\u5bb3 \u30b5\u30fc\u30d3\u30b9\u505c\u6b62\u306e\u307f\u3002Tailscale \u3067\u7ba1\u7406\u30fb\u5fa9\u65e7\u53ef\u80fd Tailscale \u969c\u5bb3 \u65e2\u5b58\u30c8\u30f3\u30cd\u30eb\u306f\u52d5\u4f5c\u7d99\u7d9a\u3002\u65b0\u898f\u63a5\u7d9a\u306e\u307f\u4e0d\u53ef"},{"location":"architecture/#dmz","title":"DMZ \u7269\u7406\u5206\u96e2\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u8a2d\u8a08\u6839\u62e0: ADR-005</p> <p>DMZ\uff08VLAN 100\uff09\u306f\u5916\u90e8\u516c\u958b\u30b5\u30fc\u30d3\u30b9\u3092\u53ce\u5bb9\u3059\u308b\u6700\u9ad8\u30ea\u30b9\u30af\u30be\u30fc\u30f3\u3002DMZ \u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u3092 FW \u306e SFP+ 2 \u306b\u76f4\u7d50\u3057\u3001DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u304b\u3089\u5b8c\u5168\u306b\u7269\u7406\u5206\u96e2\u3059\u308b\u3002</p> \u9805\u76ee \u5024 DMZ \u30b9\u30a4\u30c3\u30c1 CRS305-1G-4S+\uff08SwOS \u30e2\u30fc\u30c9\uff09 FW \u63a5\u7d9a VP2440 SFP+ 2\uff08\u5c02\u7528\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09 \u904b\u7528\u30e2\u30fc\u30c9 SwOS\uff08L2 \u30b9\u30a4\u30c3\u30c1\u30f3\u30b0\u306e\u307f\u3001RouterOS CVE \u30ea\u30b9\u30af\u6392\u9664\uff09"},{"location":"architecture/#_8","title":"\u7269\u7406\u5206\u96e2\u306e\u52b9\u679c","text":"\u4fb5\u5bb3\u30b7\u30ca\u30ea\u30aa \u5f71\u97ff\u7bc4\u56f2 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1 RouterOS \u8106\u5f31\u6027 DMZ \u306f\u7121\u95a2\u4fc2\uff08\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u901a\u904e\u3057\u306a\u3044\uff09 DMZ \u30ce\u30fc\u30c9\u304b\u3089\u306e L2 \u6a2a\u5c55\u958b FW \u3092\u7a81\u7834\u3057\u306a\u3044\u9650\u308a\u5185\u90e8\u5230\u9054\u4e0d\u53ef DMZ \u30b9\u30a4\u30c3\u30c1\u4fb5\u5bb3 DMZ \u30bb\u30b0\u30e1\u30f3\u30c8\u5185\u306b\u9650\u5b9a"},{"location":"architecture/#3","title":"3\u5c64\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u8a2d\u8a08\u6839\u62e0: ADR-003</p> Tier \u5834\u6240 \u5185\u5bb9 \u8010\u6027 1 Lab Ceph (VLAN 200) \u30d7\u30e9\u30a4\u30de\u30ea\u30c7\u30fc\u30bf \u30c7\u30a3\u30b9\u30af1\u53f0\u6545\u969c 2 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 (VLAN 240) PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 PVE\u5168\u6ec5\u3001\u30e9\u30f3\u30b5\u30e0\u30a6\u30a7\u30a2 3 Cloudflare R2 + GitHub \u30aa\u30d5\u30b5\u30a4\u30c8\u8907\u88fd (Object Lock) \u81ea\u5b85\u7269\u7406\u707d\u5bb3"},{"location":"architecture/#_9","title":"\u901a\u4fe1\u65b9\u5411\u306e\u539f\u5247","text":"<pre><code>PVE (VLAN 200) \u2190 SSH \u2500\u2500 backup-node (VLAN 240) \u2500\u2500 HTTPS \u2192 R2 / GitHub\n                                                       (Tier 3)\nPVE \u2192 backup-node: \u2588\u2588 \u5168\u62d2\u5426 \u2588\u2588 (OPNsense FW\u30eb\u30fc\u30eb)\n\u5916\u90e8 \u2192 backup-node: \u2588\u2588 \u5168\u62d2\u5426 \u2588\u2588 (inbound \u30dd\u30fc\u30c8 0)\nMgmt \u2192 backup-node: SSH \u306e\u307f (\u7ba1\u7406\u7528)\n</code></pre>"},{"location":"architecture/#_10","title":"\u30e9\u30f3\u30b5\u30e0\u30a6\u30a7\u30a2\u8010\u6027","text":"<ul> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306einbound\u30dd\u30fc\u30c8\u306f\u30bc\u30ed\uff08\u7ba1\u7406SSH\u9664\u304f\uff09</li> <li>PVE\u30ce\u30fc\u30c9\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3078\u306e\u63a5\u7d9a\u624b\u6bb5\u3092\u4e00\u5207\u6301\u305f\u306a\u3044</li> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u306fappend-only\uff08backup\u30e6\u30fc\u30b6\u30fc\u306f\u524a\u9664\u4e0d\u53ef\uff09</li> <li>R2 Object Lock\u306b\u3088\u308a\u3001\u30aa\u30d5\u30b5\u30a4\u30c8\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u66f8\u304d\u8fbc\u307f\u5f8c30\u65e5\u9593\u524a\u9664\u4e0d\u53ef</li> <li>PULL\u5f8c\u306b\u6bce\u56de\u6574\u5408\u6027\u691c\u8a3c\uff08SQLite PRAGMA check\u3001git fsck\u3001\u30b5\u30a4\u30ba\u7570\u5e38\u691c\u77e5\uff09</li> </ul>"},{"location":"hardware/","title":"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u4e00\u89a7","text":"<p>\u6700\u7d42\u66f4\u65b0: 2026-02-13\uff08DMZ\u30b9\u30a4\u30c3\u30c1\u8ffd\u52a0\u3001VP2440\u4ed5\u69d8\u4fee\u6b63\uff09</p>"},{"location":"hardware/#_2","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668","text":"\u5f79\u5272 \u6a5f\u7a2e \u4ed5\u69d8 \u8a2d\u7f6e\u5834\u6240 \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb Protectli VP2440 2x 2.5GbE (I226-V), 2x 10G SFP+ (X710-BM2), coreboot \u30e9\u30c3\u30af \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1 MikroTik CRS305-1G-4S+ 10Gbps x4 SFP+ \u30e9\u30c3\u30af \u30a2\u30af\u30bb\u30b9\u30b9\u30a4\u30c3\u30c1 MikroTik CRS328-24P-4S+ 1Gbps x24 PoE, 10G x4 \u30e9\u30c3\u30af \u30e9\u30dc\u30b9\u30a4\u30c3\u30c1 MikroTik CRS309-1G-8S+ 10Gbps x8 SFP+ \u30e9\u30c3\u30af DMZ\u30b9\u30a4\u30c3\u30c1 MikroTik CRS305-1G-4S+ 10Gbps x4 SFP+, SwOS\u30e2\u30fc\u30c9 \u30e9\u30c3\u30af \u30b2\u30fc\u30df\u30f3\u30b0\u30b9\u30a4\u30c3\u30c1 Planex FX2G-05EM2 5x 2.5GbE, \u30a2\u30f3\u30de\u30cd\u30fc\u30b8\u30c9 \u30c7\u30b9\u30af\u6a2a WiFi AP (\u5bb6\u65cf\u7528) Ubiquiti U7 Pro WiFi 7 (802.11be), PoE\u7d66\u96fb \u5929\u4e95/\u58c1 WiFi AP (\u7236\u7528) ASUS GT-AX11000 WiFi 6, AI\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u7236\u306e\u90e8\u5c4b"},{"location":"hardware/#phase-1","title":"Phase 1 \u304b\u3089\u306e\u5909\u66f4\u70b9","text":"\u5909\u66f4 \u65e7 \u65b0 \u7406\u7531 FW N100 Mini PC (4x2.5G) Protectli VP2440 (2x2.5G + 2x10G SFP+) 10G SFP+\u5bfe\u5fdc\u3001\u5c06\u6765\u306e10Gbps WAN\u3001coreboot\u306b\u3088\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30b3\u30a2/\u30e9\u30dcSW \u5f79\u5272\u305d\u306e\u307e\u307e CRS305=\u30b3\u30a2, CRS305=DMZ, CRS309=\u30e9\u30dc \u30b3\u30a2\u306f3\u63a5\u7d9a\uff08FW,Access,Lab\uff09+ 1\u7a7a\u304d\u3002DMZ\u306fFW\u76f4\u7d50\u3067\u7269\u7406\u5206\u96e2\uff08ADR-005\uff09\u3002\u30e9\u30dc\u306f\u62e1\u5f35\u6027\u91cd\u8996\u30678\u30dd\u30fc\u30c8\u7dad\u6301 \u30b2\u30fc\u30df\u30f3\u30b0SW \u672a\u5b9a Planex FX2G-05EM2 \u30a2\u30f3\u30de\u30cd\u30fc\u30b8\u30c9\u3067\u653b\u6483\u9762\u30bc\u30ed\u3001\u4f4e\u9045\u5ef6\u3001\u30b3\u30b9\u30d1\u6700\u512a\u79c0 WiFi AP MikroTik cAP ax (WiFi 6) Ubiquiti U7 Pro (WiFi 7) WiFi 7\u5bfe\u5fdc\u3001MikroTik\u306b\u5929\u4e95AP WiFi 7\u30e2\u30c7\u30eb\u306a\u3057 10G NIC Mellanox ConnectX-3 x3 CX-6 Lx x1 (CP) + 82599ES x3 (\u30ef\u30fc\u30ab\u30fc/\u4e88\u5099) + X520-DA2 x1 CX-4 Lx\u65b0\u54c1\u5165\u624b\u56f0\u96e3\u3001CP\u306e\u307fCX-6 Lx\u306725GbE\u5bfe\u5fdc\u3001\u30ef\u30fc\u30ab\u30fc\u306f82599ES\u3067\u30b3\u30b9\u30c8\u6700\u9069\u5316"},{"location":"hardware/#_3","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6ce8\u610f\u4e8b\u9805","text":"<ul> <li>ASUS GT-AX11000: AiCloud\u6a5f\u80fd\u3092\u5373\u5ea7\u306b\u7121\u52b9\u5316\u3059\u308b\u3053\u3068\uff08CVE\u6df1\u523b\u5ea6: Critical\u3001Operation WrtHug\u95a2\u9023\uff09</li> <li>MikroTik RouterOS: v7.20.8 (Long-term) \u4ee5\u4e0a\u306b\u5fc5\u305a\u66f4\u65b0\uff082025\u5e74\u306bCVSS 9.4\u7d1a\u306e\u8106\u5f31\u60277\u4ef6\uff09</li> <li>ConnectX-3\u306f\u4f7f\u7528\u7981\u6b62: PVE 9 (kernel 6.14) \u3067\u52d5\u4f5c\u3057\u306a\u3044\u5831\u544a\u3042\u308a\u3001EOL\u3001\u30bb\u30ad\u30e5\u30a2FW\u66f4\u65b0\u306a\u3057</li> <li>82599ES NVM\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u66f4\u65b0\u7981\u6b62: \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u306e\u305f\u3081\u66f4\u65b0\u3067\u6587\u93ae\u5316\u30ea\u30b9\u30af\u3002\u51fa\u8377\u6642\u306e\u307e\u307e\u904b\u7528\u3059\u308b\u3053\u3068</li> </ul>"},{"location":"hardware/#_4","title":"\u30b5\u30fc\u30d0\u30fc\u6a5f\u5668","text":""},{"location":"hardware/#vlan200","title":"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30e9\u30dc (VLAN200)","text":"\u5f79\u5272 \u6a5f\u7a2e \u4ed5\u69d8 \u7528\u9014 PVE-1 \u65e7\u30b2\u30fc\u30df\u30f3\u30b0PC GPU\u642d\u8f09, 10Gtek 82599ES (2x SFP+) VM/\u30b3\u30f3\u30c6\u30ca, Ceph OSD PVE-2 \u65e7\u30b2\u30fc\u30df\u30f3\u30b0PC GPU\u642d\u8f09, 10Gtek 82599ES (2x SFP+) VM/\u30b3\u30f3\u30c6\u30ca, Ceph OSD PVE-3 Lenovo ThinkCentre M75q Tiny Gen 5 Ryzen 7 PRO 8700GE, 64GB DDR5, NVIDIA CX-6 Lx (2x SFP28) Lab CP, Ceph Monitor, \u76e3\u8996"},{"location":"hardware/#gpupc-vlan200","title":"GPU\u5c02\u7528PC (VLAN200)","text":"\u5f79\u5272 \u6a5f\u7a2e \u4ed5\u69d8 \u7528\u9014 PVE-GPU HP Z8 G4 Workstation (\u4e2d\u53e4BTO) Xeon Gold 6134 \u00d72 (16C/32T), 64GB DDR4 ECC, NVMe 1.25TB \u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6, GPU\u8a08\u7b97 <p>\u642d\u8f09GPU:</p> GPU VRAM \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u51fa\u6240 RTX 3080 (Palit) \u00d7 2 10GB \u00d7 2 Ampere (SM 8.6) PVE-1/PVE-2\u304b\u3089\u79fb\u8a2d RTX 2080 Ti (GALAX) \u00d7 1 11GB Turing (SM 7.5) \u904a\u4f11\u54c1 \u5408\u8a08VRAM 31GB <p>\u8a73\u7d30: \u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6\u74b0\u5883</p>"},{"location":"hardware/#dmz-vlan100","title":"DMZ (VLAN100)","text":"\u5f79\u5272 \u6a5f\u7a2e \u4ed5\u69d8 \u7528\u9014 PVE-DMZ-1 Lenovo ThinkCentre M90q Tiny Gen 5 i5-14500T, 64GB DDR5, FIPS TPM, vPro Validator, \u5916\u90e8\u30b5\u30fc\u30d3\u30b9 PVE-DMZ-2 \u5c06\u6765\u8ffd\u52a0 - \u62e1\u5f35\u7528"},{"location":"hardware/#vlan240","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 (VLAN240)","text":"\u5f79\u5272 \u6a5f\u7a2e \u4ed5\u69d8 \u7528\u9014 backup-node Raspberry Pi 5 (4GB) \u63a8\u5968 ARM64, USB SSD, 1GbE PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3001Git\u30df\u30e9\u30fc <p>\u9078\u5b9a\u57fa\u6e96: - ARM64: x86 PVE\u30ce\u30fc\u30c9\u3068\u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u591a\u69d8\u6027\uff08\u5171\u901a\u8106\u5f31\u6027\u306e\u540c\u6642\u5f71\u97ff\u3092\u56de\u907f\uff09 - \u7570\u306a\u308b\u30ab\u30fc\u30cd\u30eb: Debian Stable\uff08PVE\u30ab\u30fc\u30cd\u30eb\u3068\u306f\u7570\u306a\u308b\u7cfb\u7d71\uff09 - \u72ec\u7acb\u30b9\u30c8\u30ec\u30fc\u30b8: USB SSD\uff08Ceph\u306b\u4f9d\u5b58\u3057\u306a\u3044\uff09 - \u7701\u96fb\u529b: ~5W\u5e38\u6642\u7a3c\u50cd\uff08\u5e74\u9593\u96fb\u6c17\u4ee3 ~\u00a51,200\uff09 - \u4f4e\u30b3\u30b9\u30c8: \u672c\u4f53+\u30b1\u30fc\u30b9+SSD ~\u00a518,000</p> <p>\u4ee3\u66ff: \u4e2d\u53e4\u30df\u30cbPC (x86) ~\u00a510,000-15,000\u3001\u624b\u6301\u3061\u306e\u53e4\u3044PC/\u30ce\u30fc\u30c8PC \u00a50</p>"},{"location":"hardware/#_5","title":"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u9078\u5b9a\u57fa\u6e96","text":"<ul> <li>\u65b0\u54c1\u306e\u307f: 24/365\u7a3c\u50cd\u524d\u63d0\u306e\u305f\u3081\u3001\u4e2d\u53e4\u54c1\u306eSSD\u6469\u8017\u30fb\u30b0\u30ea\u30b9\u52a3\u5316\u30ea\u30b9\u30af\u3092\u6392\u9664</li> <li>\u9ad8\u8010\u4e45: MIL\u30b9\u30da\u30c3\u30af\u30c6\u30b9\u30c8\u6e08\u307f\u30013\u5e74\u30aa\u30f3\u30b5\u30a4\u30c8\u4fdd\u8a3c</li> <li>\u7701\u96fb\u529b: TDP 35W\u3001\u30a2\u30a4\u30c9\u30eb ~8-15W</li> <li>DMZ\u306b\u306fFIPS TPM: \u5916\u90e8\u516c\u958b\u30bb\u30b0\u30e1\u30f3\u30c8\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6</li> </ul>"},{"location":"hardware/#_6","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6a5f\u5668","text":"<p>\u975e\u516c\u958b</p> <p>\u500b\u4eba\u60c5\u5831\u4fdd\u8b77\u306e\u305f\u3081\u3001\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u975e\u516c\u958b\u3067\u3059\u3002</p>"},{"location":"hardware/#nic","title":"NIC\u69cb\u6210","text":"NIC \u642d\u8f09\u5148 \u30c9\u30e9\u30a4\u30d0 \u7528\u9014 NVIDIA ConnectX-6 Lx MCX631102AN-ADAT (10/25G SFP28) PVE-3 (Lab CP) <code>mlx5_core</code> VLAN trunk, Ceph Monitor, \u5c06\u676525GbE\u79fb\u884c\u8d77\u70b9 10Gtek 82599ES X520\u4e92\u63db (10G SFP+ dual) PVE-1 <code>ixgbe</code> VLAN trunk (Port1), Ceph OSD (Port2) 10Gtek 82599ES X520\u4e92\u63db (10G SFP+ dual) PVE-2 <code>ixgbe</code> VLAN trunk (Port1), Ceph OSD (Port2) 10Gtek 82599ES X520\u4e92\u63db (10G SFP+ dual) \u4e88\u5099 <code>ixgbe</code> PVE-1/PVE-2 \u6545\u969c\u6642\u306e\u5373\u6642\u4ea4\u63db\u7528 Intel X520-DA2 (10G SFP+ dual) PVE-1 or PVE-2 <code>ixgbe</code> Windows 11 GPU-PT VM\u7528 (Mellanox\u30c9\u30e9\u30a4\u30d0\u975e\u4e92\u63db\u56de\u907f)"},{"location":"hardware/#nicphase-2","title":"NIC\u9078\u5b9a\u65b9\u91dd\uff08Phase 2 \u898b\u76f4\u3057\uff09","text":"<p>\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3 (PVE-3): NVIDIA ConnectX-6 Lx</p> <ul> <li>ConnectX-4 Lx\u306e\u65b0\u54c1\u304c\u5165\u624b\u56f0\u96e3\uff082021\u5e74EOL\u30012022\u5e74\u6700\u7d42\u51fa\u8377\uff09</li> <li>\u5f8c\u7d99CX-6 Lx\u306f\u540c\u4e00<code>mlx5_core</code>\u30c9\u30e9\u30a4\u30d0\u3067Proxmox\u5b8c\u5168\u4e92\u63db</li> <li>SFP28\u306fSFP+\u5f8c\u65b9\u4e92\u63db\u3001\u5c06\u676525GbE\u79fb\u884c\u304c\u30b1\u30fc\u30d6\u30eb\u4ea4\u63db\u306e\u307f\u3067\u53ef\u80fd</li> <li>PCIe 4.0 x8\u3001\u6d88\u8cbb\u96fb\u529b ~11W</li> </ul> <p>\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9 (PVE-1/PVE-2): 10Gtek 82599ES (Intel X520\u4e92\u63db)</p> <ul> <li><code>ixgbe</code>\u306f\u6700\u3082\u67af\u308c\u305f10GbE\u30c9\u30e9\u30a4\u30d0\u300110\u5e74\u4ee5\u4e0a\u306e\u5b9f\u7e3e</li> <li>SFP+\u30cd\u30a4\u30c6\u30a3\u30d6\u3067MikroTik CRS309\u306bDAC\u76f4\u7d50</li> <li>\u00a59,999/\u679a\u3067\u4e88\u5099\u542b\u30813\u679a\u8cfc\u5165\u3057\u3066\u3082CX-6 Lx 1\u679a\u4ee5\u4e0b</li> <li>PCIe 2.0 x8\u3060\u304c10GbE\u00d72=20Gbps\u306b\u5bfe\u3057\u5e2f\u57df40Gbps\u3067\u5341\u5206</li> <li>NVM\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u66f4\u65b0\u306f\u975e\u63a8\u5968\uff08\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u306e\u305f\u3081\u66f4\u65b0\u3067\u6587\u93ae\u5316\u30ea\u30b9\u30af\uff09</li> </ul> <p>\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u69cb\u6210\u306e\u5229\u70b9</p> <ul> <li>\u5168CX-6 Lx\u69cb\u6210\uff08~20\u4e07\u5186\uff09\u3068\u6bd4\u3079\u7d0412\u4e07\u5186\u306e\u7bc0\u7d04</li> <li>CP\u306bCX-6 Lx\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u306725GbE\u79fb\u884c\u306e\u8d77\u70b9\u3092\u78ba\u4fdd</li> <li>82599ES\u306f\u00a51\u4e07\u5186/\u679a\u306e\u305f\u3081\u6545\u969c\u6642\u3082\u5373\u4ea4\u63db\u53ef\u80fd\uff08\u4e88\u50991\u679a\u5e38\u5099\uff09</li> </ul>"},{"location":"hardware/#_7","title":"\u8cfc\u5165\u6a5f\u5668\u30ea\u30b9\u30c8","text":"\u30ab\u30c6\u30b4\u30ea \u6a5f\u5668 \u53c2\u8003\u4fa1\u683c \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb Protectli VP2440 (2x2.5G + 2x10G SFP+) ~7\u4e07\u5186 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1 MikroTik CRS305-1G-4S+ ~2.5\u4e07\u5186 \u30a2\u30af\u30bb\u30b9\u30b9\u30a4\u30c3\u30c1 MikroTik CRS328-24P-4S+ ~10\u4e07\u5186 \u30e9\u30dc\u30b9\u30a4\u30c3\u30c1 MikroTik CRS309-1G-8S+ ~4\u4e07\u5186 DMZ\u30b9\u30a4\u30c3\u30c1 MikroTik CRS305-1G-4S+ (SwOS) ~2.5\u4e07\u5186 WiFi AP Ubiquiti U7 Pro (WiFi 7) ~2.5\u4e07\u5186 \u30b2\u30fc\u30df\u30f3\u30b0\u30b9\u30a4\u30c3\u30c1 Planex FX2G-05EM2 (5x2.5G) ~1\u4e07\u5186 10G NIC x1 NVIDIA ConnectX-6 Lx MCX631102AN-ADAT (CP\u7528) ~7\u4e07\u5186 10G NIC x3 10Gtek 82599ES X520\u4e92\u63db (\u30ef\u30fc\u30ab\u30fc+\u4e88\u5099) ~3\u4e07\u5186 10G NIC x1 Intel X520-DA2 (Win11\u7528) ~0.5\u4e07\u5186 SFP+ DAC x8 10G 1m \u30b1\u30fc\u30d6\u30eb ~2.5\u4e07\u5186 Lab CP ThinkCentre M75q Tiny Gen 5 (\u65b0\u54c1) ~13\u4e07\u5186 DMZ CP ThinkCentre M90q Tiny Gen 5 (\u65b0\u54c1) ~16\u4e07\u5186 \u5408\u8a08 ~71.5\u4e07\u5186"},{"location":"hardware/#_8","title":"\u4fa1\u683c\u306b\u3064\u3044\u3066\u306e\u88dc\u8db3","text":"<p>Phase 1\u306e\u898b\u7a4d\u3082\u308a\uff08~21.5\u4e07\u5186\uff09\u304b\u3089\u306e\u4e3b\u306a\u5897\u984d\u8981\u56e0:</p> <ul> <li>\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u65b0\u54c1\u5316: +29\u4e07\u5186\uff08\u65e7\u30d7\u30e9\u30f3\u3067\u306f\u300c\u65e7PC\u6d41\u7528\u300d\u30670\u5186\u60f3\u5b9a\uff09</li> <li>NIC\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u69cb\u6210: +10.5\u4e07\u5186\uff08CX-6 Lx 1\u679a + 82599ES 3\u679a + X520-DA2 1\u679a\uff09</li> <li>CRS328\u5b9f\u58f2\u4fa1\u683c\u304c\u60f3\u5b9a\u306e\u7d042\u500d: +4.5\u4e07\u5186</li> <li>FW\u306e10G SFP+\u5bfe\u5fdc\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9: +3\u4e07\u5186</li> <li>WiFi 7 AP: +1\u4e07\u5186</li> </ul>"},{"location":"local-llm/","title":"\u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6\u74b0\u5883","text":"<p>\u6700\u7d42\u66f4\u65b0: 2026-02-11\uff08\u521d\u7248\uff09 \u95a2\u9023ADR: ADR-002</p>"},{"location":"local-llm/#_1","title":"\u6982\u8981","text":"<p>Claude Code\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u3057\u3066\u3001\u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3002 \u65e2\u5b58\u306e\u904a\u4f11GPU\u3092\u5c02\u7528\u30ef\u30fc\u30af\u30b9\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u96c6\u7d04\u3057\u3001Qwen 2.5 32B\u30af\u30e9\u30b9\u306e\u30e2\u30c7\u30eb\u3092\u52d5\u4f5c\u3055\u305b\u308b\u3002</p>"},{"location":"local-llm/#_2","title":"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210","text":""},{"location":"local-llm/#hp-z8-g4-workstationbto","title":"\u672c\u4f53: HP Z8 G4 Workstation\uff08\u4e2d\u53e4BTO\uff09","text":"\u9805\u76ee \u30b9\u30da\u30c3\u30af CPU Xeon Gold 6134 \u00d7 2 (16C/32T, 3.2GHz, TDP 130W) \u30e1\u30e2\u30ea 64GB DDR4 ECC RDIMM (16GB \u00d7 4) \u30b9\u30c8\u30ec\u30fc\u30b8 NVMe M.2 256GB (OS) + NVMe 1TB (\u30e2\u30c7\u30eb\u4fdd\u7ba1) PSU 1450W (P/N: 851385-001) \u203b\u8981\u78ba\u8a8d PCIe x16 \u00d7 4\u672c (2CPU\u69cb\u6210\u6642, PCIe 3.0) \u30cd\u30c3\u30c8\u30ef\u30fc\u30af Intel 1GbE \u00d7 2 (\u30aa\u30f3\u30dc\u30fc\u30c9) \u63a5\u7d9aVLAN VLAN200 (Lab)"},{"location":"local-llm/#gpu","title":"GPU\u69cb\u6210","text":"GPU \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 VRAM TDP CUDA SM RTX 3080 (Palit) #1 Ampere (SM 8.6) 10GB GDDR6X 320W 68 SM RTX 3080 (Palit) #2 Ampere (SM 8.6) 10GB GDDR6X 320W 68 SM RTX 2080 Ti (GALAX) Turing (SM 7.5) 11GB GDDR6 250W 68 SM \u5408\u8a08 31GB 890W"},{"location":"local-llm/#_3","title":"\u96fb\u529b\u30d0\u30b8\u30a7\u30c3\u30c8","text":"<pre><code>GPU\u5408\u8a08:    890W (RTX 3080 \u00d72: 640W + RTX 2080 Ti: 250W)\nCPU\u5408\u8a08:    260W (130W \u00d7 2)\n\u30b7\u30b9\u30c6\u30e0:    ~50W\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u5408\u8a08:      ~1,200W\n</code></pre> <p>Z8 G4\u306eBTO\u6a19\u6e96PSU\u306f1125W\u306e\u305f\u3081\u3001\u5358\u4f53\u3067\u306f\u4e0d\u8db3\u3059\u308b\u3002</p> \u68481: 1450W PSU\u63db\u88c5\uff08\u63a8\u5968\uff09\u68482: \u30c7\u30e5\u30a2\u30ebPSU\u69cb\u6210\uff08\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\uff09 <p>HP\u7d14\u6b631450W PSU (P/N: 851385-001) \u306b\u63db\u88c5\u3059\u308b\u3002</p> <pre><code>1450W PSU 1\u53f0\u3067\u5168\u7d66\u96fb\n\u2192 \u8ca0\u8377\u7387: 82.8% \u2705\uff08\u7406\u60f3\u7684\u306a80%\u53f0\uff09\n</code></pre> <p>BTO\u6ce8\u6587\u6642\u306bPCServer1\u3078\u5728\u5eab\u3092\u554f\u3044\u5408\u308f\u305b\u308b\u3053\u3068\u3002</p> <p>1450W\u304c\u5165\u624b\u3067\u304d\u306a\u3044\u5834\u5408\u3001\u5916\u90e8ATX\u96fb\u6e90\u3067GPU\u306b\u7d66\u96fb\u3059\u308b\u3002 \u30de\u30a4\u30cb\u30f3\u30b0\u74b0\u5883\u3067\u5e83\u304f\u4f7f\u308f\u308c\u305f\u5b9f\u7e3e\u306e\u3042\u308b\u69cb\u6210\u3002</p> <pre><code>Z8 G4 \u5185\u8535PSU (1125W)          \u5916\u90e8ATX\u96fb\u6e90 (1000W)\n  \u2514\u2500 CPU \u00d72, \u30e1\u30e2\u30ea, NVMe,       \u2514\u2500 GPU \u00d73 (PCIe 8\u30d4\u30f3 \u00d76\u672c)\n     \u30de\u30b6\u30fc, \u30d5\u30a1\u30f3                   \u251c\u2500 RTX 3080 #1 (320W)\n     \u2192 \u8ca0\u8377: ~310W (27.6%)          \u251c\u2500 RTX 3080 #2 (320W)\n                                      \u2514\u2500 RTX 2080 Ti  (250W)\n                                      \u2192 \u8ca0\u8377: ~890W (89.0%)\n</code></pre> \u5fc5\u8981\u30d1\u30fc\u30c4 \u4fa1\u683c ATX\u96fb\u6e90 1000W (80+ Gold) ~\u00a515,000\u301c20,000 \u30c7\u30e5\u30a2\u30ebPSU\u9023\u52d5\u57fa\u677f\uff08ADD2PSU\u7b49\uff09 ~\u00a5500\u301c1,000 PCIe 8\u30d4\u30f3\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb ~\u00a5500\u301c1,000 <p>\u9023\u52d5\u57fa\u677f\u304c\u30e1\u30a4\u30f3PSU\u306e24\u30d4\u30f3ATX\u4fe1\u53f7\u3092\u691c\u77e5\u3057\u3001\u5916\u90e8PSU\u3092\u540c\u6642ON/OFF\u3059\u308b\u3002 \u30e9\u30a4\u30b6\u30fc\u30b1\u30fc\u30d6\u30eb\u3068\u306e\u4f75\u7528\u3067GPU\u30fb\u30b1\u30fc\u30d6\u30eb\u304c\u5916\u90e8\u306b\u9732\u51fa\u3059\u308b\u69cb\u6210\u306b\u306a\u308b\u304c\u3001 \u30db\u30fc\u30e0\u30e9\u30dc\u74b0\u5883\u3067\u306f\u5b9f\u7528\u4e0a\u554f\u984c\u306a\u3044\u3002</p> <p>\u30c7\u30e5\u30a2\u30ebPSU\u6642\u306e\u6ce8\u610f</p> <p>\u4e21PSU\u306f\u5fc5\u305a\u540c\u3058\u30b3\u30f3\u30bb\u30f3\u30c8\uff08\u96fb\u6e90\u30bf\u30c3\u30d7\uff09\u304b\u3089\u7d66\u96fb\u3059\u308b\u3053\u3068\u3002 \u7570\u306a\u308b\u7cfb\u7d71\u304b\u3089\u53d6\u308b\u3068\u96fb\u4f4d\u5dee\u3067\u30de\u30b6\u30fc\u30dc\u30fc\u30c9\u3092\u640d\u50b7\u3059\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002</p>"},{"location":"local-llm/#_4","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30b9\u30bf\u30c3\u30af","text":""},{"location":"local-llm/#_5","title":"\u63a8\u8ad6\u30a8\u30f3\u30b8\u30f3\u6bd4\u8f03","text":"\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af \u7570\u7a2eGPU \u4e26\u5217\u65b9\u5f0f \u63a8\u5b9a\u901f\u5ea6 (32B Q4) \u63a1\u7528 ik_llama.cpp \u2705 \u30b0\u30e9\u30d5\u5206\u5272 (\u30c6\u30f3\u30bd\u30eb\u4e26\u5217) 25-40 tok/s \u2b50 \u63a8\u5968 llama.cpp / Ollama \u2705 \u30ec\u30a4\u30e4\u30fc\u5206\u5272 (\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3) 8-15 tok/s \u7c21\u5358\u3060\u304c\u9045\u3044 vLLM \u274c \u540c\u7a2eGPU\u5fc5\u9808 \u30c6\u30f3\u30bd\u30eb\u4e26\u5217 N/A \u4f7f\u7528\u4e0d\u53ef ExLlamaV2 \u274c Flash Attn\u5236\u9650 \u30c6\u30f3\u30bd\u30eb\u4e26\u5217 N/A 2080 Ti\u3067\u4e0d\u53ef"},{"location":"local-llm/#_6","title":"\u63a8\u5968\u30e2\u30c7\u30eb","text":"\u30e2\u30c7\u30eb \u30d1\u30e9\u30e1\u30fc\u30bf \u91cf\u5b50\u5316 VRAM\u30b5\u30a4\u30ba \u7528\u9014 Qwen 2.5 32B Instruct 32B Q4_K_M ~20GB \u30e1\u30a4\u30f3: \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u578b\u30bf\u30b9\u30af\u3001IaC\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9 Qwen 2.5 14B Instruct 14B Q4_K_M ~9GB \u30b5\u30d6: \u8efd\u91cf\u30bf\u30b9\u30af\u3001\u8907\u6570\u540c\u6642\u8d77\u52d5\u53ef Qwen 2.5 Coder 14B 14B Q4_K_M ~9GB \u30b3\u30fc\u30c9\u751f\u6210\u7279\u5316\uff08\u5fc5\u8981\u6642\uff09 <p>Qwen 2.5\uff08\u975eCoder\uff09\u3092\u9078\u629e\u3059\u308b\u7406\u7531</p> <p>Claude Code\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u9014\u3067\u306f\u3001<code>.claude/</code>\u306e\u30b9\u30ad\u30eb\u5b9a\u7fa9\u3092\u8aad\u307f\u53d6\u308a\u3001 Ansible/OpenTofu/Docker Compose\u306e\u64cd\u4f5c\u3092\u81ea\u5f8b\u7684\u306b\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002 Coder\u30e2\u30c7\u30eb\u3088\u308a\u3082\u6c4e\u7528\u30e2\u30c7\u30eb\u306e\u65b9\u304c\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u7684\u601d\u8003\u30fb\u30c4\u30fc\u30eb\u6d3b\u7528\u306b\u512a\u308c\u308b\u3002</p>"},{"location":"local-llm/#_7","title":"\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806","text":""},{"location":"local-llm/#1-ik_llamacpp","title":"1. ik_llama.cpp \u30d3\u30eb\u30c9","text":"<pre><code># \u7570\u7a2eGPU\u5bfe\u5fdc: Turing (SM 7.5) + Ampere (SM 8.6)\ngit clone https://github.com/ikawrakow/ik_llama.cpp\ncd ik_llama.cpp\ncmake -B build \\\n  -DGGML_CUDA=ON \\\n  -DCMAKE_CUDA_ARCHITECTURES=\"75;86\"\ncmake --build build -j$(nproc)\n</code></pre>"},{"location":"local-llm/#2","title":"2. \u30e2\u30c7\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<pre><code># Hugging Face\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nmkdir -p /opt/models\nhuggingface-cli download \\\n  Qwen/Qwen2.5-32B-Instruct-GGUF \\\n  qwen2.5-32b-instruct-q4_k_m.gguf \\\n  --local-dir /opt/models\n</code></pre>"},{"location":"local-llm/#3","title":"3. \u63a8\u8ad6\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5","text":"<pre><code>./build/bin/llama-server \\\n  --model /opt/models/qwen2.5-32b-instruct-q4_k_m.gguf \\\n  --split-mode graph \\\n  --tensor-split 10,10,11 \\\n  --n-gpu-layers 999 \\\n  --ctx-size 8192 \\\n  --host 0.0.0.0 \\\n  --port 8080\n</code></pre> <p><code>--tensor-split 10,10,11</code> \u306f\u5404GPU\u306eVRAM\u6bd4\u7387\u306b\u57fa\u3065\u304f\u5206\u5272\u3002</p>"},{"location":"local-llm/#4-open-webui","title":"4. Open WebUI\uff08\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\uff09","text":"<pre><code># docker-compose.yml\nservices:\n  open-webui:\n    image: ghcr.io/open-webui/open-webui:main\n    ports:\n      - \"3000:8080\"\n    environment:\n      - OLLAMA_BASE_URL=http://host.docker.internal:8080\n    volumes:\n      - open-webui-data:/app/backend/data\nvolumes:\n  open-webui-data:\n</code></pre>"},{"location":"local-llm/#_8","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210","text":"<pre><code>flowchart LR\n    USER[\u30e6\u30fc\u30b6\u30fc] --&gt;|Tailscale / VLAN200| WEBUI[Open WebUI&lt;br/&gt;:3000]\n    WEBUI --&gt; ENGINE[ik_llama.cpp&lt;br/&gt;:8080]\n    ENGINE --&gt; GPU1[RTX 3080 #1&lt;br/&gt;10GB]\n    ENGINE --&gt; GPU2[RTX 3080 #2&lt;br/&gt;10GB]\n    ENGINE --&gt; GPU3[RTX 2080 Ti&lt;br/&gt;11GB]</code></pre> \u30dd\u30fc\u30c8 \u30b5\u30fc\u30d3\u30b9 \u30a2\u30af\u30bb\u30b9 8080 ik_llama.cpp API \u30ed\u30fc\u30ab\u30eb / VLAN200\u5185 3000 Open WebUI Tailscale\u7d4c\u7531"},{"location":"local-llm/#pcie","title":"PCIe\u5e2f\u57df\u3068\u63a8\u8ad6\u6027\u80fd","text":""},{"location":"local-llm/#pcie-x4","title":"\u306a\u305cPCIe x4\u3067\u3082\u554f\u984c\u306a\u3044\u304b","text":"<p>LLM\u63a8\u8ad6\uff08\u7279\u306b\u30ec\u30a4\u30e4\u30fc\u5206\u5272\u65b9\u5f0f\uff09\u3067\u306f\u3001GPU\u9593\u3067\u8ee2\u9001\u3059\u308b\u30c7\u30fc\u30bf\u306f\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u6d3b\u6027\u5316\u30c6\u30f3\u30bd\u30eb\u306e\u307f\u3002</p> \u63a5\u7d9a\u65b9\u5f0f \u5e2f\u57df\u5e45 LLM\u63a8\u8ad6\u3078\u306e\u5f71\u97ff PCIe 3.0 x16 ~16 GB/s \u30d9\u30fc\u30b9\u30e9\u30a4\u30f3 PCIe 3.0 x8 ~8 GB/s \u307b\u307c\u5dee\u306a\u3057 PCIe 3.0 x4 ~4 GB/s \u5b9f\u7528\u4e0a\u554f\u984c\u306a\u3057 10GbE (\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u6563) ~1.25 GB/s \u81f4\u547d\u7684\u306b\u9045\u3044 NVLink ~900 GB/s \u7406\u60f3\u3060\u304c\u9ad8\u4fa1 <p>HP Z8 G4\uff082CPU\u69cb\u6210\uff09\u306fPCIe 3.0 x16 \u00d7 4\u672c\u306e\u305f\u3081\u30013\u679a\u5168\u3066x16\u63a5\u7d9a\u304c\u53ef\u80fd\u3002</p>"},{"location":"local-llm/#pve-1pve-2","title":"PVE-1/PVE-2\u3078\u306e\u5f71\u97ff","text":"<p>GPU\u79fb\u8a2d\u5f8c\u3001PVE-1/PVE-2\u306fCPU\u30aa\u30f3\u30ea\u30fc\u306e\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u3068\u306a\u308b\u3002</p> \u5f71\u97ff \u5bfe\u5fdc GPU-PT VM\u304c\u4f7f\u7528\u4e0d\u53ef \u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\uff08Pterodactyl Wings\uff09\u306fCPU\u306e\u307f\u3067\u7a3c\u50cd\u53ef Ceph OSD\u306f\u5f71\u97ff\u306a\u3057 \u30b9\u30c8\u30ec\u30fc\u30b8\u306fNIC (82599ES) \u7d4c\u7531\u3067\u7d99\u7d9a \u76e3\u8996\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u5f71\u97ff\u306a\u3057 node_exporter\u7b49\u306fCPU\u3067\u52d5\u4f5c <p>\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u5f71\u97ff</p> <p>Pterodactyl\u3067\u7ba1\u7406\u3059\u308b\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\uff08Minecraft, Valheim\u7b49\uff09\u306fCPU\u4e3b\u4f53\u306e\u305f\u3081\u3001 GPU\u79fb\u8a2d\u306b\u3088\u308b\u5f71\u97ff\u306f\u306a\u3044\u3002GPU-PT VM\u3067\u306e\u30b2\u30fc\u30df\u30f3\u30b0\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001 Z8 G4\u304b\u3089GPU\u3092PVE-1/2\u306b\u623b\u3059\u304b\u3001\u5225\u9014GPU\u3092\u8abf\u9054\u3059\u308b\u3002</p>"},{"location":"local-llm/#_9","title":"\u8cfc\u5165\u5148","text":"\u30b7\u30e7\u30c3\u30d7 \u7528\u9014 URL PCServer1 Z8 G4\u672c\u4f53\uff08BTO\uff09 pcserver1.jp \u3058\u3083\u3093\u3071\u3089 DDR4 ECC RDIMM janpara.co.jp Amazon NVMe SSD 1TB\u3001ATX\u96fb\u6e90\u3001\u9023\u52d5\u57fa\u677f\u3001\u30e9\u30a4\u30b6\u30fc\u30b1\u30fc\u30d6\u30eb amazon.co.jp \u9577\u5c3e\u88fd\u4f5c\u6240 GPU\u30e9\u30c3\u30af\uff08\u7269\u7406\u5e72\u6e09\u5bfe\u7b56\uff09 nagao-ss.co.jp"},{"location":"vlans/","title":"VLAN\u8a2d\u8a08","text":""},{"location":"vlans/#vlan_1","title":"VLAN\u4e00\u89a7","text":"VLAN ID \u540d\u524d \u30b5\u30d6\u30cd\u30c3\u30c8 \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 DHCP\u7bc4\u56f2 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ec\u30d9\u30eb 10 Gaming 10.0.10.0/24 10.0.10.1 .100-.200 \u9ad8\uff08\u5185\u90e8\u306e\u307f\uff09 20 Home 10.0.20.0/24 10.0.20.1 .100-.200 \u4e2d 21 Father 10.0.21.0/24 10.0.21.1 .100-.200 \u4f4e\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f\uff09 30 IoT 10.0.30.0/24 10.0.30.1 .100-.200 \u4f4e\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f\uff09 31 Guest 10.0.31.0/24 10.0.31.1 .100-.200 \u4f4e\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f\uff09 90 Management 10.0.90.0/24 10.0.90.1 \u9759\u7684\u306e\u307f \u6700\u9ad8\uff08\u7ba1\u7406\u8005\u306e\u307f\uff09 100 DMZ 10.0.100.0/24 10.0.100.1 \u9759\u7684\u306e\u307f \u9694\u96e2\uff08\u5916\u90e8\u516c\u958b\uff09 200 Lab 10.0.200.0/24 10.0.200.1 .100-.200 \u9ad8\uff08\u5185\u90e8\u30b5\u30fc\u30d3\u30b9\uff09 240 Backup 10.0.240.0/29 10.0.240.1 \u9759\u7684\u306e\u307f \u6700\u9ad8\uff08\u9694\u96e2\u3001PULL\u578b\uff09 250 Storage 10.0.250.0/24 \u306a\u3057\uff08L2\uff09 \u9759\u7684\u306e\u307f \u6700\u9ad8\uff08\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u307f\uff09"},{"location":"vlans/#vlan_2","title":"VLAN\u9593\u901a\u4fe1\u30eb\u30fc\u30eb","text":"\u9001\u4fe1\u5143 \u5b9b\u5148 \u8a31\u53ef \u7528\u9014 Gaming (10) Lab (200) \u30b2\u30fc\u30e0\u30dd\u30fc\u30c8 \u8a31\u53ef MC/Valheim\u7b49\u63a5\u7d9a Home (20) Lab (200) \u30b2\u30fc\u30e0\u30dd\u30fc\u30c8 \u8a31\u53ef MC/Valheim\u7b49\u63a5\u7d9a Gaming (10) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8 \u8a31\u53ef \u6700\u512a\u5148 Home (20) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8 \u8a31\u53ef \u901a\u5e38 Mgmt (90) \u5404VLAN\u7ba1\u7406\u30dd\u30fc\u30c8\u306e\u307f \u8a31\u53ef \u7ba1\u7406\u30a2\u30af\u30bb\u30b9\uff08\u660e\u793a\u7684\u8a31\u53ef\uff09 Backup (240) Lab (200) SSH \u8a31\u53ef PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u53d6\u5f97 Backup (240) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8 HTTPS \u8a31\u53ef \u30aa\u30d5\u30b5\u30a4\u30c8\u8907\u88fd (R2/GitHub) Lab (200) Backup (240) \u62d2\u5426 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3078\u306e\u63a5\u7d9a\u4e0d\u53ef Father (21) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f \u8a31\u53ef \u5185\u90e8\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef IoT (30) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f \u8a31\u53ef \u5185\u90e8\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef Guest (31) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f \u8a31\u53ef \u5185\u90e8\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef DMZ (100) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f \u8a31\u53ef \u5185\u90e8\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef"},{"location":"vlans/#_1","title":"\u7aef\u672b\u63a5\u7d9a\u30dd\u30ea\u30b7\u30fc","text":"\u7aef\u672b \u63a5\u7d9a\u5148VLAN \u7406\u7531 \u30b2\u30fc\u30df\u30f3\u30b0PC VLAN 10 (Gaming) \u30b2\u30fc\u30e0\u5c02\u7528\u3002Tailscale\u30fbSSH\u9375\u30fb\u7ba1\u7406\u60c5\u5831\u3092\u4e00\u5207\u7f6e\u304b\u306a\u3044 \u7ba1\u7406\u7aef\u672b VLAN 90 (Mgmt) Tailscale\uff08\u7ba1\u7406\u7528\uff09\u30fbSSH\u9375\u30fbYubiKey\u30fb\u7ba1\u7406\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u3053\u3053\u306e\u307f \u6bcd\u306ePC VLAN 20 (Home) Vaultwarden\u30fb\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a \u6bcd\u306e\u30b9\u30de\u30db VLAN 20 (Home) Vaultwarden\u30fb\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a \u7236\u306ePC/\u30b9\u30de\u30db VLAN 21 (Father) \u5b8c\u5168\u9694\u96e2\uff08\u4e8c\u91cdNAT\uff09 \u4f1a\u793ePC VLAN 31 (Guest) \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u307f\u3002Home VLAN\u306b\u63a5\u7d9a\u7981\u6b62"},{"location":"vlans/#wifi-ssid","title":"WiFi SSID\u4e00\u89a7","text":"SSID VLAN \u6697\u53f7\u5316 \u7528\u9014 AP ***** 20 WPA3 \u5bb6\u65cf\u30e1\u30a4\u30f3 cAP ax ***** 20 WPA3 2.4GHz\u4e92\u63db\u7528 cAP ax IoT 30 WPA2 \u30b9\u30de\u30fc\u30c8\u5bb6\u96fb cAP ax Guest 31 WPA2 \u6765\u5ba2\u7528 cAP ax ***** 21 WPA2 \u7236\u5c02\u7528 ASUS GT-AX11000"},{"location":"decisions/","title":"Architecture Decision Records (ADR)","text":"<p>\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u4e0a\u306e\u91cd\u8981\u306a\u6c7a\u5b9a\u3092\u8a18\u9332\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3002</p>"},{"location":"decisions/#adr","title":"ADR\u30d5\u30a9\u30fc\u30de\u30c3\u30c8","text":"<pre><code># [\u756a\u53f7]-[\u30bf\u30a4\u30c8\u30eb].md\n\n## \u30b9\u30c6\u30fc\u30bf\u30b9\n\u63d0\u6848 / \u627f\u8a8d / \u5ec3\u6b62\n\n## \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\u306a\u305c\u3053\u306e\u6c7a\u5b9a\u304c\u5fc5\u8981\u3060\u3063\u305f\u304b\n\n## \u6c7a\u5b9a\n\u4f55\u3092\u6c7a\u3081\u305f\u304b\n\n## \u7d50\u679c\n\u3053\u306e\u6c7a\u5b9a\u306e\u5f71\u97ff\n</code></pre>"},{"location":"decisions/#adr_1","title":"\u8a18\u9332\u6e08\u307fADR","text":"<ul> <li>ADR-001: Phase 2 \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u9078\u5b9a\u898b\u76f4\u3057\uff082026-02-11 \u627f\u8a8d\uff09</li> <li>ADR-002: GPU\u5c02\u7528PC\u5c0e\u5165\u3068\u30ed\u30fc\u30ab\u30ebLLM\u57fa\u76e4\u69cb\u7bc9\uff082026-02-11 \u627f\u8a8d\uff09</li> <li>ADR-003: \u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff082026-02-13 \u627f\u8a8d\uff09</li> <li>ADR-004: \u5916\u90e8\u30a2\u30af\u30bb\u30b9\u57fa\u76e4\u306e\u8cac\u52d9\u5206\u96e2 \u2014 Cloudflare Zero Trust \u00d7 Tailscale\uff082026-02-13 \u627f\u8a8d\uff09</li> <li>ADR-005: DMZ \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7269\u7406\u5206\u96e2 \u2014 \u5c02\u7528\u30b9\u30a4\u30c3\u30c1 FW \u76f4\u7d50\u69cb\u6210\uff082026-02-13 \u627f\u8a8d\uff09</li> </ul>"},{"location":"decisions/001-hardware-revision-2026-02/","title":"ADR-001: Phase 2 \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u9078\u5b9a\u898b\u76f4\u3057","text":""},{"location":"decisions/001-hardware-revision-2026-02/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>\u627f\u8a8d</p>"},{"location":"decisions/001-hardware-revision-2026-02/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":"<p>Phase 1\uff082026-02-10\uff09\u3067\u7b56\u5b9a\u3057\u305f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u554f\u984c\u304c\u5224\u660e\u3057\u305f:</p> <ol> <li>ConnectX-3 EOL: Mellanox ConnectX-3\u304cEOL\u3001PVE 9 (kernel 6.14) \u3067\u52d5\u4f5c\u3057\u306a\u3044\u5831\u544a</li> <li>Windows 11 Mellanox\u975e\u4e92\u63db: Win11\u306eMellanox\u30c9\u30e9\u30a4\u30d0\u306b\u81f4\u547d\u7684\u30d0\u30b0\u3001GPU-PT VM\u3067\u4f7f\u7528\u4e0d\u53ef</li> <li>10Gbps WAN\u5bfe\u5fdc: 10Gbps\u5149\u56de\u7dda\u30b5\u30fc\u30d3\u30b9\u5bfe\u8c61\u5730\u57df\u306e\u305f\u3081\u3001FW\u306b10G SFP+\u304c\u5fc5\u8981</li> <li>WiFi 7\u666e\u53ca: MikroTik\u306bWiFi 7\u5929\u4e95AP\u30e2\u30c7\u30eb\u304c\u306a\u304f\u3001WiFi 7\u5bfe\u5fdcAP\u3078\u306e\u5909\u66f4\u304c\u5fc5\u8981</li> <li>CRS328\u5b9f\u58f2\u4fa1\u683c: \u60f3\u5b9a\uff08~5.5\u4e07\u5186\uff09\u306e\u7d042\u500d\uff08~10\u4e07\u5186\uff09\u3068\u5224\u660e</li> <li>\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3: \u65e7PC\u6d41\u7528\u3067\u306f\u306a\u304f\u65b0\u54c1\u3092\u63a1\u7528\u3057\u300124/365\u306e\u5b89\u5b9a\u7a3c\u50cd\u3092\u78ba\u4fdd\u3059\u308b\u5fc5\u8981</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8106\u5f31\u6027: MikroTik RouterOS\u306b2025\u5e74\u3060\u3051\u3067CVSS 9.4\u7d1a\u304c7\u4ef6\u3001ASUS AiCloud\u306bCritical\u8106\u5f31\u6027</li> </ol>"},{"location":"decisions/001-hardware-revision-2026-02/#_3","title":"\u6c7a\u5b9a","text":""},{"location":"decisions/001-hardware-revision-2026-02/#_4","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668","text":"\u9805\u76ee \u6c7a\u5b9a \u4ee3\u66ff\u6848\u3068\u5374\u4e0b\u7406\u7531 FW Protectli VP2440 N100 Mini PC: 10G SFP+\u306a\u3057 \u30b3\u30a2SW CRS305-1G-4S+ (Phase 1\u636e\u7f6e) \u30b3\u30a2\u306f4\u63a5\u7d9a\uff08FW, Access, Lab, DMZ\uff09\u3067\u4e01\u5ea6\u3002\u5165\u308c\u66ff\u3048\u4e0d\u8981 \u30e9\u30dcSW CRS309-1G-8S+ (Phase 1\u636e\u7f6e) \u30e9\u30dc\u306f\u30ce\u30fc\u30c9\u62e1\u5f35\u4e88\u5b9a\u3042\u308a\u30018\u30dd\u30fc\u30c8\u306e\u4f59\u88d5\u304c\u5fc5\u8981 \u30b2\u30fc\u30df\u30f3\u30b0SW Planex FX2G-05EM2 NETGEAR MS105: 2\u500d\u9ad8\u4fa1\u3002MikroTik CRS310: \u9ad8\u4fa1+2.5G\u6027\u80fd\u554f\u984c\u5831\u544a\u3002Buffalo: \u5b89\u5b9a\u6027\u554f\u984c\u3002YAMAHA: \u5c0f\u578b\u30e2\u30c7\u30eb\u306a\u3057\u30fb\u9ad8\u4fa1 WiFi AP Ubiquiti U7 Pro MikroTik cAP ax: WiFi 6\u6b62\u307e\u308a 10G NIC (PVE) ConnectX-4 Lx x3 CX-3: EOL\u3001PVE 9\u975e\u4e92\u63db\u3001\u30bb\u30ad\u30e5\u30a2FW\u66f4\u65b0\u306a\u3057 10G NIC (Win11) Intel X520-DA2 x1 CX-4 Lx: Win11 Mellanox\u30c9\u30e9\u30a4\u30d0\u81f4\u547d\u7684\u30d0\u30b0"},{"location":"decisions/001-hardware-revision-2026-02/#_5","title":"\u30b5\u30fc\u30d0\u30fc\u6a5f\u5668","text":"\u9805\u76ee \u6c7a\u5b9a \u4ee3\u66ff\u6848\u3068\u5374\u4e0b\u7406\u7531 Lab CP ThinkCentre M75q Tiny Gen 5 (\u65b0\u54c1) \u4e2d\u53e4ThinkCentre: SSD\u6469\u8017\u30fb\u30b0\u30ea\u30b9\u52a3\u5316\u3002ASUS NUC 14 Pro: \u30d9\u30a2\u30dc\u30fc\u30f3\u3067\u8ffd\u52a0\u8cbb\u7528\u3002Dell Pro Micro: \u5728\u5eab\u4e0d\u5b89\u5b9a DMZ CP ThinkCentre M90q Tiny Gen 5 (\u65b0\u54c1) M75q: FIPS TPM\u306a\u3057\u3002HP Elite Mini 800 G9: 25\u4e07\u5186\u3067\u9ad8\u3059\u304e"},{"location":"decisions/001-hardware-revision-2026-02/#_6","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56","text":"<ul> <li>ASUS GT-AX11000: AiCloud\u6a5f\u80fd\u3092\u5373\u5ea7\u306b\u7121\u52b9\u5316</li> <li>MikroTik: RouterOS v7.20.8 (Long-term) \u4ee5\u4e0a\u3078\u66f4\u65b0\u5fc5\u9808</li> <li>ConnectX-3: \u4f7f\u7528\u7981\u6b62\uff08CX-4 Lx\u3078\u79fb\u884c\uff09</li> </ul>"},{"location":"decisions/001-hardware-revision-2026-02/#_7","title":"\u7d50\u679c","text":"<ul> <li>\u8cfc\u5165\u4e88\u7b97: ~21.5\u4e07\u5186 \u2192 ~60.5\u4e07\u5186\uff08\u4e3b\u306bCP\u65b0\u54c1\u5316\u3068\u5b9f\u58f2\u4fa1\u683c\u5dee\u7570\uff09</li> <li>10Gbps WAN\u5bfe\u5fdc: FW\u30ec\u30d9\u30eb\u3067\u5bfe\u5fdc\u53ef\u80fd\u306b</li> <li>WiFi 7\u5bfe\u5fdc: \u5c06\u6765\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5897\u306b\u3082\u5bfe\u5fdc</li> <li>NIC\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: EOL\u88fd\u54c1\u6392\u9664\u3001Win11\u4e92\u63db\u6027\u78ba\u4fdd</li> <li>\u30b2\u30fc\u30df\u30f3\u30b0VLAN: \u30a2\u30f3\u30de\u30cd\u30fc\u30b8\u30c9SW\u3067\u653b\u6483\u9762\u30bc\u30ed\u30fb\u4f4e\u9045\u5ef6\u3092\u4e21\u7acb</li> <li>CP\u5b89\u5b9a\u6027: \u65b0\u54c1MIL\u30b9\u30da\u30c3\u30af\u6a5f\u5668\u306724/365\u904b\u7528\u306b\u8010\u3048\u308b\u69cb\u6210</li> </ul>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/","title":"ADR-002: GPU\u5c02\u7528PC\u5c0e\u5165\u3068\u30ed\u30fc\u30ab\u30ebLLM\u57fa\u76e4\u69cb\u7bc9","text":""},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>\u627f\u8a8d</p>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":"<p>Claude Code\u3078\u306e\u4f9d\u5b58\u30ea\u30b9\u30af\u3068\u3001\u30db\u30fc\u30e0\u30e9\u30dc\u904b\u7528\u306e\u81ea\u5f8b\u6027\u78ba\u4fdd\u306e\u305f\u3081\u3001\u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6\u74b0\u5883\u306e\u69cb\u7bc9\u3092\u691c\u8a0e\u3057\u305f\u3002</p>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_3","title":"\u80cc\u666f","text":"<ol> <li>\u5916\u90e8AI\u4f9d\u5b58\u30ea\u30b9\u30af: Claude Code\u304c\u30c0\u30a6\u30f3\u3057\u305f\u5834\u5408\u3001<code>.claude/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30b9\u30ad\u30eb\u3084IaC\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u505c\u6b62</li> <li>GPU\u8cc7\u7523\u306e\u904a\u4f11: PVE-1/PVE-2\u306b\u642d\u8f09\u306eRTX 3080 (Palit) \u00d72\u3001\u5225\u9014RTX 2080 Ti (GALAX) \u00d71\u304c\u672a\u6d3b\u7528</li> <li>\u30b3\u30b9\u30c8\u6bd4\u8f03: RTX 3090\u4e2d\u53e4\u304c17\u4e07\u5186\u3068\u9ad8\u9a30\u3057\u3066\u304a\u308a\u3001\u65e2\u5b58GPU\u6d3b\u7528\u306e\u65b9\u304c\u5408\u7406\u7684</li> <li>\u5206\u6563\u63a8\u8ad6\u306e\u9650\u754c: 10GbE (1.25 GB/s) \u3067\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8d8a\u3057GPU\u5206\u5272\u306f\u3001PCIe\u5185\u90e8\u901a\u4fe1\u3068\u6bd4\u3079\u6841\u9055\u3044\u306b\u9045\u3044</li> </ol>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_4","title":"\u691c\u8a0e\u3057\u305f\u69cb\u6210","text":"\u69cb\u6210\u6848 \u30b3\u30b9\u30c8 VRAM \u8a55\u4fa1 RTX 3090\u5358\u54c1\u8cfc\u5165 ~17\u4e07\u5186 24GB \u9ad8\u3044\u3001GPU\u304c\u904a\u4f11\u306e\u307e\u307e \u65b0\u54c1AM5\u30de\u30eb\u30c1GPU PC ~27\u4e07\u5186 31GB DDR5\u9ad8\u9a30\u3067\u5272\u9ad8 \u4e2d\u53e4HP Z8 G4 ~20\u4e07\u5186 31GB \u30b3\u30b9\u30d1\u6700\u826f"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_5","title":"\u6c7a\u5b9a","text":""},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#hp-z8-g4-workstation","title":"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2: HP Z8 G4 Workstation\uff08\u4e2d\u53e4\uff09","text":"<p>PCServer1 BTO\u3067\u4ee5\u4e0b\u306e\u69cb\u6210\u3092\u63a1\u7528:</p> \u30ab\u30c6\u30b4\u30ea \u9078\u629e \u4fa1\u683c \u30d9\u30fc\u30b9\u30b7\u30e3\u30fc\u30b7 Xeon Gold 6134 3.2GHz 8C/16T \u00d7 2CPU \u00a5160,000 \u4fdd\u8a3c 30\u65e5\uff08\u77ed\u7e2e\uff09 \u00a50 OS Win11\uff08Proxmox VE\u4e0a\u66f8\u304d\u7528\uff09 \u00a55,000 \u30e1\u30e2\u30ea 8GB \u00d7 2\uff08\u6700\u5c0f\u3001\u5f8c\u304b\u3089\u81ea\u524d\u3067\u63db\u88c5\uff09 \u00a516,000 NVMe KIOXIA M.2 256GB\uff08OS\u7528\uff09 \u00a55,000 GPU/\u305d\u306e\u4ed6 \u306a\u3057\uff08\u81ea\u524d\u642d\u8f09\uff09 \u00a50 BTO\u5c0f\u8a08 \u00a5186,000 <p>\u81ea\u524d\u8abf\u9054:</p> \u30d1\u30fc\u30c4 \u4fa1\u683c DDR4 ECC RDIMM 16GB \u00d7 4\uff08\u3058\u3083\u3093\u3071\u3089\u7b49\uff09 ~\u00a510,000\u301c20,000 NVMe SSD 1TB\uff08\u30e2\u30c7\u30eb\u4fdd\u7ba1\u7528\uff09 ~\u00a510,000\u301c15,000 \u30e9\u30a4\u30b6\u30fc\u30b1\u30fc\u30d6\u30eb\u30fbGPU\u30e9\u30c3\u30af\uff08\u7269\u7406\u5e72\u6e09\u5bfe\u7b56\uff09 ~\u00a56,000\u301c10,000 \u81ea\u524d\u5c0f\u8a08 ~\u00a526,000\u301c45,000 \u7dcf\u5408\u8a08 ~\u00a5212,000\u301c231,000"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#gpu","title":"GPU\u69cb\u6210","text":"GPU VRAM TDP \u51fa\u6240 RTX 3080 (Palit) \u00d7 2 10GB \u00d7 2 320W \u00d7 2 PVE-1/PVE-2\u304b\u3089\u79fb\u8a2d RTX 2080 Ti (GALAX) \u00d7 1 11GB 250W \u904a\u4f11\u54c1 \u5408\u8a08 31GB 890W"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_6","title":"\u96fb\u6e90\u69cb\u6210","text":"<p>Z8 G4\u306eBTO\u6a19\u6e96PSU\u306f1125W\u3060\u304c\u3001GPU 3\u679a\uff08890W\uff09+ CPU\uff08260W\uff09+ \u30b7\u30b9\u30c6\u30e0\uff0850W\uff09= \u7d041,200W\u3067\u5185\u8535PSU\u5358\u4f53\u3067\u306f\u4e0d\u8db3\u3059\u308b\u3002\u4ee5\u4e0b\u306e2\u6848\u3067\u5bfe\u5fdc\u3059\u308b\u3002</p> <p>\u68481: 1450W PSU\u63db\u88c5\uff08\u63a8\u5968\uff09</p> <p>HP\u7d14\u6b631450W PSU\uff08P/N: 851385-001\uff09\u3078\u306e\u63db\u88c5\u3092BTO\u6ce8\u6587\u6642\u306b\u554f\u3044\u5408\u308f\u305b\u308b\u3002\u8ca0\u8377\u738782.8%\u3067\u5b89\u5168\u570f\u5185\u3002</p> <p>\u68482: \u5916\u90e8ATX\u96fb\u6e90\u306b\u3088\u308b\u30c7\u30e5\u30a2\u30ebPSU\u69cb\u6210\uff08\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\uff09</p> <p>1450W\u304c\u5165\u624b\u3067\u304d\u306a\u3044\u5834\u5408\u3001\u30de\u30a4\u30cb\u30f3\u30b0\u3067\u5b9f\u7e3e\u306e\u3042\u308b\u30c7\u30e5\u30a2\u30ebPSU\u69cb\u6210\u3092\u63a1\u7528\u3059\u308b\u3002</p> <pre><code>Z8 G4 \u5185\u8535PSU (1125W)          \u5916\u90e8ATX\u96fb\u6e90 (1000W)\n  \u2514\u2500 CPU \u00d72, \u30e1\u30e2\u30ea, NVMe,       \u2514\u2500 GPU \u00d73 (PCIe 8\u30d4\u30f3 \u00d76\u672c)\n     \u30de\u30b6\u30fc\u30dc\u30fc\u30c9, \u30d5\u30a1\u30f3              \u251c\u2500 RTX 3080 #1 (320W)\n     \u2192 \u8ca0\u8377: ~310W (27.6%)          \u251c\u2500 RTX 3080 #2 (320W)\n                                      \u2514\u2500 RTX 2080 Ti  (250W)\n                                      \u2192 \u8ca0\u8377: ~890W (89.0%)\n</code></pre> \u5fc5\u8981\u30d1\u30fc\u30c4 \u4fa1\u683c ATX\u96fb\u6e90 1000W (80+ Gold) ~\u00a515,000\u301c20,000 \u30c7\u30e5\u30a2\u30ebPSU\u9023\u52d5\u57fa\u677f\uff08ADD2PSU\u7b49\uff09 ~\u00a5500\u301c1,000 PCIe 8\u30d4\u30f3\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb\uff08\u53d6\u308a\u56de\u3057\u7528\uff09 ~\u00a5500\u301c1,000 <p>\u9023\u52d5\u57fa\u677f\u306f\u30e1\u30a4\u30f3PSU\u306e24\u30d4\u30f3ATX\u4fe1\u53f7\u3092\u691c\u77e5\u3057\u3066\u5916\u90e8PSU\u3092\u540c\u6642ON/OFF\u3059\u308b\u3002\u30e9\u30a4\u30b6\u30fc\u30b1\u30fc\u30d6\u30eb\u3068\u306e\u4f75\u7528\u3067GPU\u3068\u30b1\u30fc\u30d6\u30eb\u304c\u5916\u90e8\u306b\u9732\u51fa\u3059\u308b\u300c\u8131\u8178\u300d\u69cb\u6210\u306b\u306a\u308b\u304c\u3001\u30db\u30fc\u30e0\u30e9\u30dc\u74b0\u5883\u3067\u306f\u5b9f\u7528\u4e0a\u554f\u984c\u306a\u3044\u3002</p> <p>\u30a2\u30fc\u30b9\u96fb\u4f4d\u5dee\u306b\u6ce8\u610f</p> <p>\u4e21PSU\u306f\u5fc5\u305a\u540c\u3058\u30b3\u30f3\u30bb\u30f3\u30c8\uff08\u96fb\u6e90\u30bf\u30c3\u30d7\uff09\u304b\u3089\u7d66\u96fb\u3059\u308b\u3053\u3068\u3002 \u7570\u306a\u308b\u7cfb\u7d71\u304b\u3089\u53d6\u308b\u3068\u96fb\u4f4d\u5dee\u3067\u30de\u30b6\u30fc\u30dc\u30fc\u30c9\u3092\u640d\u50b7\u3059\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002</p>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#llm","title":"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2: \u30ed\u30fc\u30ab\u30ebLLM\u63a8\u8ad6\u30b9\u30bf\u30c3\u30af","text":"\u30ec\u30a4\u30e4\u30fc \u9078\u629e \u7406\u7531 OS Proxmox VE 8 \u65e2\u5b58\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3001GPU \u30d1\u30b9\u30b9\u30eb\u30fc\u53ef\u80fd \u63a8\u8ad6\u30a8\u30f3\u30b8\u30f3 ik_llama.cpp \u7570\u7a2eGPU\u5bfe\u5fdc\u3001graph\u5206\u5272\u30673-4\u500d\u9ad8\u901f \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 Open WebUI \u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9\u306e\u30c1\u30e3\u30c3\u30c8UI \u30e2\u30c7\u30eb Qwen 2.5 32B (Q4_K_M) 18-20GB VRAM\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u578b\u30bf\u30b9\u30af\u5bfe\u5fdc"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#hp-z8-g4","title":"HP Z8 G4\u3092\u9078\u5b9a\u3057\u305f\u7406\u7531","text":"\u6bd4\u8f03\u9805\u76ee HP Z8 G4 HP Z840 Lenovo P920 \u5185\u8535PSU 1125W / 1450W\u9078\u629e\u53ef 1125W\u56fa\u5b9a 1400W GPU\u96fb\u6e90\u30b3\u30cd\u30af\u30bf 6+2\u30d4\u30f3 \u00d7 4\uff08\u30cd\u30a4\u30c6\u30a3\u30d68\u30d4\u30f3\uff09 6\u30d4\u30f3 \u00d7 3\uff08\u8981\u5909\u63db\uff09 8\u30d4\u30f3 \u00d7 3 + 6\u30d4\u30f3 \u00d7 1 GPU\u7269\u7406\u30b9\u30da\u30fc\u30b9 \u30d5\u30eb\u30cf\u30a4\u30c8\u5bfe\u5fdc ~111mm\u9ad8\u3055\u5236\u9650 \u30d5\u30eb\u30cf\u30a4\u30c8\u5bfe\u5fdc PCIe x16\u30b9\u30ed\u30c3\u30c8 4\u672c\uff082CPU\u6642\uff09 3\u672c 5\u672c GeForce\u4e92\u63db\u6027 RTX 3080 Ti/3090\u52d5\u4f5c\u5831\u544a\u3042\u308a RTX 3080\u52d5\u4f5c\u5831\u544a\u3042\u308a Lenovo\u516c\u5f0fGeForce\u30c9\u30e9\u30a4\u30d0\u63d0\u4f9b \u4fa1\u683c \u00a5160,000\u301c \u00a553,000\u301c \u00a5100,000\u301c <p>Z840\u306f\u5b89\u4fa1\u3060\u304c\u3001GPU\u306e\u9ad8\u3055\u5236\u9650\uff08GALAX 2080 Ti\u304c\u539a\u3044\uff09\u3068PSU\u5bb9\u91cf\u4e0d\u8db3\u304c\u81f4\u547d\u7684\u3002P920\u306fPCIe\u30b9\u30ed\u30c3\u30c8\u6570\u6700\u591a\u3060\u304c\u3001\u4e2d\u53e4\u30b7\u30e7\u30c3\u30d7\u3067\u306e\u5165\u624b\u6027\u304cZ8 G4\u3088\u308a\u52a3\u308b\u3002</p>"},{"location":"decisions/002-gpu-pc-local-llm-2026-02/#_7","title":"\u7d50\u679c","text":"<ul> <li>\u30b3\u30b9\u30c8: \u7dcf\u984d ~21\u4e07\u5186\uff08RTX 3090\u5358\u54c1\u306e17\u4e07\u5186\u3068\u6bd4\u8f03\u3057\u3066+4\u4e07\u5186\u3067\u3001VRAM +7GB\u30fbPC\u4e00\u5f0f\u53d6\u5f97\uff09</li> <li>VRAM: 31GB\uff08Qwen 2.5 32B Q4\u304c\u4f59\u88d5\u3067\u52d5\u4f5c\u300114B\u306f2\u30e2\u30c7\u30eb\u540c\u6642\u30ed\u30fc\u30c9\u53ef\u80fd\uff09</li> <li>AI\u81ea\u5f8b\u6027: Claude Code\u969c\u5bb3\u6642\u306b\u30ed\u30fc\u30ab\u30ebLLM\u3067\u30b9\u30ad\u30eb\u5b9f\u884c\u30fbIaC\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u53ef\u80fd</li> <li>GPU\u6709\u52b9\u6d3b\u7528: \u904a\u4f11GPU 3\u679a\u3092\u5168\u3066\u7a3c\u50cd\u3001PVE-1/PVE-2\u306fCPU\u30ef\u30fc\u30ab\u30fc\u3068\u3057\u3066\u7d99\u7d9a</li> <li>\u30af\u30e9\u30b9\u30bf\u62e1\u5f35: Proxmox VE\u3068\u3057\u3066VLAN200\u30e9\u30dc\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u53ef\u80fd</li> <li>\u8cfc\u5165\u5148: PCServer1\uff08pcserver1.jp\uff09BTO\u300190\u65e5\u4fdd\u8a3c\u3001\u6cd5\u4eba\u5411\u3051\u4e2d\u53e4WS\u5c02\u9580\u5e97</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/","title":"ADR-003: \u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":""},{"location":"decisions/003-backup-architecture-2026-02/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>\u627f\u8a8d</p>"},{"location":"decisions/003-backup-architecture-2026-02/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":""},{"location":"decisions/003-backup-architecture-2026-02/#_3","title":"\u80cc\u666f","text":"<p>\u30db\u30fc\u30e0\u30e9\u30dc\u306e\u30c7\u30fc\u30bf\u4fdd\u8b77\u306b\u95a2\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u540c\u6642\u969c\u5bb3\u30b7\u30ca\u30ea\u30aa\u3078\u306e\u8010\u6027\u304c\u6b20\u5982\u3057\u3066\u3044\u305f:</p> <ol> <li>GitHub\u5168\u60c5\u5831\u6f0f\u6d29: \u30ea\u30dd\u30b8\u30c8\u30ea\u30fbCI/CD\u8a2d\u5b9a\u30fb\u6697\u53f7\u5316\u6e08\u307f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304c\u653b\u6483\u8005\u306b\u516c\u958b</li> <li>Proxmox\u5168\u30ce\u30fc\u30c9\u540c\u6642\u969c\u5bb3: \u5171\u901a\u30ab\u30fc\u30cd\u30eb\u8106\u5f31\u6027\u306b\u3088\u308b\u5168\u53f0\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af</li> <li>\u30e9\u30f3\u30b5\u30e0\u30a6\u30a7\u30a2\u306b\u3088\u308bLab\u5185\u6a2a\u5c55\u958b: PVE\u30ce\u30fc\u30c9\u4fb5\u5bb3\u304b\u3089Ceph\u30b9\u30c8\u30ec\u30fc\u30b8\u6697\u53f7\u5316</li> </ol>"},{"location":"decisions/003-backup-architecture-2026-02/#_4","title":"\u73fe\u72b6\u306e\u554f\u984c","text":"<ul> <li>Docker\u30dc\u30ea\u30e5\u30fc\u30e0\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u4e00\u5207\u5b58\u5728\u3057\u306a\u3044</li> <li>Ceph 3\u91cd\u8907\u88fd\u306f\u300c1\u53f0\u6545\u969c\u300d\u3078\u306e\u8010\u6027\u306e\u307f\u3002\u5168\u53f0\u540c\u6642\u505c\u6b62\u306f\u60f3\u5b9a\u5916</li> <li>Vaultwarden\u30d1\u30b9\u30ef\u30fc\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u6d88\u5931\u306f\u81ea\u5206+\u6bcd\u306e\u5168\u30c7\u30b8\u30bf\u30eb\u30e9\u30a4\u30d5\u306b\u5f71\u97ff</li> <li>\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u306e\u30ef\u30fc\u30eb\u30c9\u30c7\u30fc\u30bf\uff08Minecraft\u7b49\uff09\u306f\u518d\u73fe\u4e0d\u53ef\u80fd</li> <li>VLAN 90\uff08\u7ba1\u7406VLAN\uff09\u304c\u5168VLAN\u3078\u7121\u5236\u9650\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u8a2d\u8a08\u4e0a\u306e\u6b20\u9665</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#_5","title":"\u8105\u5a01\u30e2\u30c7\u30eb","text":"<p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b7\u30b9\u30c6\u30e0\u304a\u3088\u3073\u30a4\u30f3\u30d5\u30e9\u5168\u4f53\u306b\u5bfe\u3059\u308b\u653b\u6483\u30d9\u30af\u30c8\u30eb\u3092\u5305\u62ec\u7684\u306b\u5206\u6790\u3057\u305f:</p> \u30ab\u30c6\u30b4\u30ea \u653b\u6483\u30d9\u30af\u30c8\u30eb \u30ea\u30b9\u30af \u30cd\u30c3\u30c8\u30ef\u30fc\u30af VLAN\u30db\u30c3\u30d4\u30f3\u30b0\uff08\u4e8c\u91cd\u30bf\u30ae\u30f3\u30b0\uff09 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3078\u306e\u76f4\u63a5\u653b\u6483 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af ARP \u30b9\u30d7\u30fc\u30d5\u30a3\u30f3\u30b0 L2\u901a\u4fe1\u306e\u508d\u53d7\u30fb\u6539\u3056\u3093 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af VLAN 90 \u5168\u8a31\u53ef\u30eb\u30fc\u30eb\u7d4c\u7531\u306e\u5230\u9054 \u7ba1\u7406VLAN\u4fb5\u5bb3\u3067\u5168VLAN\u5d29\u58ca \u30cd\u30c3\u30c8\u30ef\u30fc\u30af Tailscale\u304c\u5168VLAN\u5206\u96e2\u3092\u30d0\u30a4\u30d1\u30b9 \u7aef\u672b\u611f\u67d3\u3067\u5168\u7ba1\u7406\u30a2\u30af\u30bb\u30b9\u596a\u53d6 \u30db\u30b9\u30c8\u4fb5\u5bb3 PUSH\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u60aa\u7528 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u6697\u53f7\u5316\u30fb\u524a\u9664 \u30db\u30b9\u30c8\u4fb5\u5bb3 backup-export.sh\u6539\u3056\u3093\uff08\u30b9\u30ed\u30fc\u30fb\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\uff09 \u5168retention window\u6c5a\u67d3 \u30db\u30b9\u30c8\u4fb5\u5bb3 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u81ea\u4f53\u306e\u4fb5\u5bb3 SSH\u9375\u30fbR2\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u7a83\u53d6 \u7aef\u672b\u611f\u67d3 \u30b2\u30fc\u30df\u30f3\u30b0PC\u611f\u67d3\u2192Tailscale\u2192\u5168\u7ba1\u7406\u6a29\u9650 \u5168\u30a4\u30f3\u30d5\u30e9\u638c\u63e1\uff08\u6700\u5927\u30ea\u30b9\u30af\uff09 \u7aef\u672b\u611f\u67d3 \u6bcd\u306e\u30b9\u30de\u30db\u611f\u67d3\u2192VW master PW\u7a83\u53d6 \u6bcd\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u5168\u6f0f\u6d29 \u7aef\u672b\u611f\u67d3 \u6bcd\u306e\u30b9\u30de\u30db/PC\u2192\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u8106\u5f31\u6027\u2192Docker escape PVE root\u53d6\u5f97 \u7aef\u672b\u611f\u67d3 \u4f1a\u793ePC\u2192VLAN 20\u6a4b\u6e21\u3057\u2192\u4f1a\u793e\u21d4\u81ea\u5b85\u306e\u53cc\u65b9\u5411\u30ea\u30b9\u30af \u4f1a\u793e\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u304c\u6ce2\u53ca \u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3 Docker image\u6c5a\u67d3 root\u30d7\u30ed\u30bb\u30b9\u3067\u306e\u4efb\u610f\u30b3\u30fc\u30c9\u5b9f\u884c \u7269\u7406 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306e\u7a83\u53d6 SSH\u9375\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u9732\u51fa \u904b\u7528 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u9759\u304b\u306a\u5931\u6557 \u707d\u5bb3\u6642\u306b\u5fa9\u5143\u30c7\u30fc\u30bf\u306a\u3057 \u904b\u7528 NTP\u64cd\u4f5c\u306b\u3088\u308bretention\u8a08\u7b97\u72c2\u3044 \u6b63\u5e38\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u65e9\u671f\u524a\u9664"},{"location":"decisions/003-backup-architecture-2026-02/#_6","title":"\u6c7a\u5b9a","text":""},{"location":"decisions/003-backup-architecture-2026-02/#1-pull","title":"1. PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>PUSH\u578b\uff08PVE\u30ce\u30fc\u30c9\u304c\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\uff09\u3067\u306f\u306a\u304f\u3001PULL\u578b\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304cPVE\u30ce\u30fc\u30c9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\uff09\u3092\u63a1\u7528\u3059\u308b\u3002</p> <p>\u6839\u62e0: PUSH\u578b\u3067\u306fPVE\u30ce\u30fc\u30c9\u304c\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u3092\u6301\u3064\u305f\u3081\u3001PVE\u4fb5\u5bb3\u6642\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3082\u7834\u58ca\u3055\u308c\u308b\u3002PULL\u578b\u3067\u306fPVE\u30ce\u30fc\u30c9\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3078\u306e\u63a5\u7d9a\u624b\u6bb5\u3092\u4e00\u5207\u6301\u305f\u306a\u3044\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#2-vlan-240-backup","title":"2. \u5c02\u7528VLAN 240 (Backup) \u306e\u65b0\u8a2d","text":"\u9805\u76ee \u5024 VLAN ID 240 \u540d\u524d Backup \u30b5\u30d6\u30cd\u30c3\u30c8 10.0.240.0/29 \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 10.0.240.1 (OPNsense) \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 10.0.240.2 DHCP \u306a\u3057\uff08\u9759\u7684\u306e\u307f\uff09 \u7269\u7406\u30b9\u30a4\u30c3\u30c1 CRS328\uff08\u30a2\u30af\u30bb\u30b9\u30b9\u30a4\u30c3\u30c1\uff09 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ec\u30d9\u30eb \u6700\u9ad8\uff08\u9694\u96e2\u3001inbound\u30bc\u30ed\uff09 <p>/29\u3092\u9078\u629e\u3057\u305f\u7406\u7531: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306f1\u53f0\u306e\u307f\u3002/24 (254\u30db\u30b9\u30c8)\u306f\u904e\u5270\u3002/29 (6\u30db\u30b9\u30c8)\u3067\u5c06\u6765\u306e\u5197\u9577\u5316\u306b\u3082\u5bfe\u5fdc\u3057\u3064\u3064\u3001\u653b\u6483\u9762\u3092\u6700\u5c0f\u5316\u3002</p> <p>CRS328\u3092\u9078\u629e\u3057\u305f\u7406\u7531: PVE\u30ce\u30fc\u30c9\u304c\u63a5\u7d9a\u3055\u308c\u308bCRS309\u3068\u306f\u7269\u7406\u7684\u306b\u7570\u306a\u308b\u30b9\u30a4\u30c3\u30c1\u3002VLAN\u30db\u30c3\u30d4\u30f3\u30b0\u304c\u30b9\u30a4\u30c3\u30c1\u5883\u754c\u3067\u906e\u65ad\u3055\u308c\u308b\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#3","title":"3. \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u30eb\u30fc\u30eb","text":"<p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306einbound\u30dd\u30fc\u30c8\u306f\u30bc\u30ed\uff08\u7ba1\u7406SSH\u9664\u304f\uff09:</p> <ul> <li>OUT: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 \u2192 PVE\u30ce\u30fc\u30c9 (10.0.200.1-3): SSH (22/tcp) \u306e\u307f</li> <li>OUT: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 \u2192 Forgejo (10.0.200.11): SSH (22/tcp) \u306e\u307f</li> <li>OUT: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 \u2192 Internet: HTTPS (443/tcp)\u3001DNS (53)\u3001NTP (123) \u306e\u307f</li> <li>IN: VLAN 90 \u2192 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9: SSH (22/tcp) \u306e\u307f\uff08\u7ba1\u7406\u7528\uff09</li> <li>IN/OUT: \u305d\u306e\u4ed6\u5168\u3066\u62d2\u5426</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#4-vlan-90vlan","title":"4. VLAN 90\uff08\u7ba1\u7406VLAN\uff09\u306e\u30eb\u30fc\u30eb\u4fee\u6b63","text":"<p>\u65e2\u5b58\u306e\u300c\u5168VLAN\u3078\u306e\u5168\u8a31\u53ef\u300d\u3092\u300c\u660e\u793a\u7684\u8a31\u53ef\u306e\u307f\u300d\u306b\u5909\u66f4\u3002\u3053\u308c\u306b\u3088\u308a\u7ba1\u7406VLAN\u304c\u4fb5\u5bb3\u3055\u308c\u3066\u3082\u30d0\u30c3\u30af\u30a2\u30c3\u30d7VLAN\u3092\u542b\u3080\u5404VLAN\u3078\u306e\u6a2a\u5c55\u958b\u304c\u5236\u9650\u3055\u308c\u308b\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#5-sshcommand","title":"5. SSH\u5236\u9650\uff08command=\u5f37\u5236 + \u30db\u30b9\u30c8\u9375\u30d4\u30f3\u30cb\u30f3\u30b0\uff09","text":"<p>PVE\u30ce\u30fc\u30c9\u5074\u306e <code>authorized_keys</code>: <pre><code>command=\"/usr/local/bin/backup-export.sh\",no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-ed25519 AAAA...\n</code></pre></p> <ul> <li><code>backup-export.sh</code> \u3068 <code>authorized_keys</code> \u306f <code>chattr +i</code>\uff08immutable\uff09\u3067\u4fdd\u8b77</li> <li>SSH \u30db\u30b9\u30c8\u9375\u306f <code>known_hosts</code> \u306b\u30d4\u30f3\u30cb\u30f3\u30b0\uff08MITM\u9632\u6b62\uff09</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#6-append-only","title":"6. Append-Only \u30b9\u30c8\u30ec\u30fc\u30b8 + \u9577\u671f\u4fdd\u6301","text":"<ul> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f <code>chattr +a</code>\uff08append-only\uff09</li> <li>backup\u30e6\u30fc\u30b6\u30fc\u306f\u65b0\u898f\u8ffd\u52a0\u306e\u307f\u53ef\u80fd\u3001\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5909\u66f4\u30fb\u524a\u9664\u306f\u4e0d\u53ef</li> <li><code>restic forget</code>\uff08\u53e4\u3044\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u524a\u9664\uff09\u306froot\u306esystemd timer\u304c\u90311\u56de\u306e\u307f\u5b9f\u884c</li> <li>\u4fdd\u6301\u30dd\u30ea\u30b7\u30fc: daily 30\u65e5 + weekly 12\u9031 + monthly 12\u30f6\u6708</li> <li>\u30b9\u30ed\u30fc\u30fb\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u3067\u6c5a\u67d3\u3067\u304d\u308b\u306e\u306fdaily\u306e\u307f\u3002weekly/monthly\u306b\u6b63\u5e38\u30c7\u30fc\u30bf\u304c\u6b8b\u308b</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#7-pull","title":"7. \u6574\u5408\u6027\u691c\u8a3c\uff08PULL\u5f8c\u306b\u6bce\u56de\u5b9f\u884c\uff09","text":"\u30c7\u30fc\u30bf\u7a2e\u5225 \u691c\u8a3c\u65b9\u6cd5 Vaultwarden SQLite <code>PRAGMA integrity_check</code> + \u30ec\u30b3\u30fc\u30c9\u6570\u306e\u671f\u5f85\u7bc4\u56f2\u30c1\u30a7\u30c3\u30af \u30b2\u30fc\u30e0\u30bb\u30fc\u30d6 tar \u30d5\u30a1\u30a4\u30eb\u6570\u30fb\u5408\u8a08\u30b5\u30a4\u30ba\u306e\u524d\u56de\u6bd4\u8f03 (\u00b150%\u8d85\u3067\u8b66\u544a) Pterodactyl SQL SQL\u69cb\u6587\u30c1\u30a7\u30c3\u30af + \u30c6\u30fc\u30d6\u30eb\u6570\u691c\u8a3c Git \u30ea\u30dd\u30b8\u30c8\u30ea <code>git fsck</code> + <code>git bundle verify</code>"},{"location":"decisions/003-backup-architecture-2026-02/#8-3","title":"8. 3\u5c64\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u69cb\u9020","text":"Tier \u5834\u6240 \u5185\u5bb9 \u8010\u6027 1 Lab Ceph (VLAN 200) \u30d7\u30e9\u30a4\u30de\u30ea\u30c7\u30fc\u30bf \u30c7\u30a3\u30b9\u30af1\u53f0\u6545\u969c 2 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 (VLAN 240) PULL\u578b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 PVE\u5168\u6ec5 + \u30e9\u30f3\u30b5\u30e0 3 Cloudflare R2 + GitHub \u30aa\u30d5\u30b5\u30a4\u30c8\u8907\u88fd \u81ea\u5b85\u706b\u707d <p>R2\u306fObject Lock (WORM) \u3092\u6709\u52b9\u5316\u3057\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u304c\u6f0f\u6d29\u3057\u3066\u3082\u65e2\u5b58\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u4e0d\u53ef\u306b\u3059\u308b\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#9","title":"9. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306e\u30cf\u30fc\u30c9\u30cb\u30f3\u30b0","text":"<ul> <li>OS: Debian 12 Stable\uff08PVE\u30ab\u30fc\u30cd\u30eb\u3068\u306f\u7570\u306a\u308b\u7cfb\u7d71\uff09</li> <li>CPU: ARM64\u63a8\u5968\uff08x86 PVE\u3068\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u591a\u69d8\u6027\u78ba\u4fdd\uff09</li> <li>\u30c7\u30a3\u30b9\u30af: LUKS2\u30d5\u30eb\u30c7\u30a3\u30b9\u30af\u6697\u53f7\u5316\uff08TPM-backed\u81ea\u52d5\u8d77\u52d5\uff09</li> <li>Docker\u306a\u3057: restic, git, rclone, sqlite3\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</li> <li>USBGuard: \u8a31\u53ef\u30c7\u30d0\u30a4\u30b9\u4ee5\u5916\u3092\u30d6\u30ed\u30c3\u30af</li> <li>unattended-upgrades: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30c3\u30c1\u81ea\u52d5\u9069\u7528</li> <li>systemd hardening: ProtectSystem=strict, NoNewPrivileges=yes \u7b49</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#10","title":"10. \u72ec\u7acb\u30a2\u30e9\u30fc\u30c8","text":"<p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306fPVE\u306e\u76e3\u8996\u30b9\u30bf\u30c3\u30af\uff08Prometheus/Grafana\uff09\u306b\u4f9d\u5b58\u3057\u306a\u3044\u72ec\u81ea\u306e\u901a\u77e5\u7d4c\u8def\u3092\u6301\u3064:</p> <ul> <li>Discord Webhook / LINE Notify\uff08outbound HTTPS\uff09</li> <li>\u6210\u529f\u901a\u77e5\uff08dead man's switch: 3\u65e5\u9023\u7d9a\u3067\u6765\u306a\u3051\u308c\u3070\u7570\u5e38\uff09</li> <li>\u5931\u6557\u30fb\u7570\u5e38\u691c\u77e5\u6642\u306e\u5373\u6642\u901a\u77e5</li> </ul>"},{"location":"decisions/003-backup-architecture-2026-02/#11","title":"11. \u7ba1\u7406\u64cd\u4f5c\u306e\u7269\u7406\u5206\u96e2\uff08\u7aef\u672b\u611f\u67d3\u5bfe\u7b56\uff09","text":"<p>\u30b2\u30fc\u30df\u30f3\u30b0PC\uff08VLAN 10\uff09\u306bTailscale\u30fbSSH\u9375\u30fb\u7ba1\u7406\u7528\u30d6\u30e9\u30a6\u30b6\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u96c6\u4e2d\u3057\u3066\u304a\u308a\u3001\u611f\u67d3\u6642\u306b\u5168VLAN\u5206\u96e2\u304c\u30d0\u30a4\u30d1\u30b9\u3055\u308c\u308b\u69cb\u9020\u7684\u6b20\u9665\u304c\u3042\u308b\u3002</p> <p>\u5bfe\u7b56: \u7ba1\u7406\u7aef\u672b\u306e\u7269\u7406\u5206\u96e2</p> <ul> <li>\u30b2\u30fc\u30df\u30f3\u30b0PC\u304b\u3089Tailscale\u3092\u524a\u9664\u3001SSH\u9375\u30fb\u7ba1\u7406\u7cfb\u8a8d\u8a3c\u60c5\u5831\u3092\u9664\u53bb</li> <li>\u7ba1\u7406\u5c02\u7528\u306e\u7269\u7406\u7aef\u672b\uff08\u53e4\u3044PC/\u30ce\u30fc\u30c8PC\uff09\u3092VLAN 90\u306b\u63a5\u7d9a</li> <li>\u7ba1\u7406\u7aef\u672b\u306b\u306e\u307fTailscale\u3001SSH\u9375\u3001YubiKey\u3001\u30d6\u30e9\u30a6\u30b6\u7ba1\u7406\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u914d\u7f6e</li> <li>Tailscale ACL\u3067\u7ba1\u7406\u7aef\u672b\u4ee5\u5916\u304b\u3089\u306e\u7ba1\u7406\u30a2\u30af\u30bb\u30b9\u3092\u62d2\u5426</li> </ul> <p>\u3053\u308c\u306b\u3088\u308a\u30b2\u30fc\u30df\u30f3\u30b0PC\uff08\u9ad8\u30ea\u30b9\u30af\u74b0\u5883: Steam Mod, Discord\u7b49\uff09\u304c\u611f\u67d3\u3057\u3066\u3082\u3001\u5230\u9054\u53ef\u80fd\u306a\u5b9b\u5148\u306f\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u30dd\u30fc\u30c8+Internet\u306e\u307f\u306b\u9650\u5b9a\u3055\u308c\u308b\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#12-pc","title":"12. \u4f1a\u793ePC\u306e\u63a5\u7d9a\u30dd\u30ea\u30b7\u30fc","text":"<p>\u4f1a\u793ePC\u3092\u81ea\u5b85WiFi\u306b\u63a5\u7d9a\u3059\u308b\u5834\u5408\u306fVLAN 31 (Guest) \u3092\u4f7f\u7528\u3059\u308b\u3002VLAN 20 (Home) \u306b\u63a5\u7d9a\u3059\u308b\u3068\u3001\u4f1a\u793eVPN\u3068\u306e\u6a4b\u6e21\u3057\u306b\u3088\u308a\u4f1a\u793e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u304c\u81ea\u5b85\u30e9\u30dc\u306b\u6ce2\u53ca\u3059\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#_7","title":"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u9078\u5b9a","text":"\u9078\u629e\u80a2 \u30b3\u30b9\u30c8 \u5229\u70b9 \u6b20\u70b9 Raspberry Pi 5 (4GB) ~\u00a518,000 ARM\u591a\u69d8\u6027\u30015W\u7701\u96fb\u529b Docker ARM\u4e92\u63db\u6027\uff08\u4e0d\u4f7f\u7528\u306a\u306e\u3067\u5f71\u97ff\u306a\u3057\uff09 \u4e2d\u53e4\u30df\u30cbPC (x86) ~\u00a510,000-15,000 Docker\u5b8c\u5168\u4e92\u63db\uff08\u4e0d\u4f7f\u7528\uff09\u3001\u5185\u8535SSD \u30ab\u30fc\u30cd\u30eb\u591a\u69d8\u6027\u306a\u3057 \u624b\u6301\u3061\u306e\u53e4\u3044PC/\u30ce\u30fc\u30c8PC \u00a50 \u7121\u6599\u3001\u30ce\u30fc\u30c8PC\u306a\u3089\u30d0\u30c3\u30c6\u30ea\u30fc\u304cUPS\u4ee3\u308f\u308a \u6d88\u8cbb\u96fb\u529b\u9ad8 <p>\u63a8\u5968: Raspberry Pi 5 + USB SSD\u3002ARM\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u3088\u308bx86\u3068\u306e\u591a\u69d8\u6027\u78ba\u4fdd\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u6700\u5927\u306e\u5229\u70b9\u3002</p>"},{"location":"decisions/003-backup-architecture-2026-02/#_8","title":"\u7d50\u679c","text":"<ul> <li>\u540c\u6642\u969c\u5bb3\u8010\u6027: GitHub\u5168\u6f0f\u6d29 + PVE\u5168\u53f0\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af\u306e\u540c\u6642\u767a\u751f\u3067\u3082\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304b\u30893\u6642\u9593\u4ee5\u5185\u3067\u5b8c\u5168\u5fa9\u65e7\u53ef\u80fd</li> <li>\u30e9\u30f3\u30b5\u30e0\u30a6\u30a7\u30a2\u8010\u6027: PULL\u578b + inbound \u30bc\u30ed + append-only \u306b\u3088\u308a\u3001Lab\u5185\u304b\u3089\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3092\u7834\u58ca\u3059\u308b\u7d4c\u8def\u304c\u5b58\u5728\u3057\u306a\u3044</li> <li>\u30b9\u30ed\u30fc\u30fb\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u8010\u6027: \u6574\u5408\u6027\u691c\u8a3c + \u9577\u671f\u4fdd\u6301 (weekly/monthly) + R2 Object Lock\u306e\u591a\u5c64\u9632\u5fa1</li> <li>VLAN 90 \u4fee\u6b63: \u7ba1\u7406VLAN\u306e\u5168\u8a31\u53ef\u30eb\u30fc\u30eb\u3092\u5ec3\u6b62\u3057\u3001\u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u539f\u5247\u3092\u7ba1\u7406\u30bb\u30b0\u30e1\u30f3\u30c8\u306b\u3082\u9069\u7528</li> <li>\u30b3\u30b9\u30c8: ~\u00a518,000\uff08Raspberry Pi 5 + USB SSD\uff09+ R2/GitHub\u7121\u6599\u67a0</li> <li>\u904b\u7528\u8ca0\u8377: \u5168\u81ea\u52d5\uff08systemd timer\uff09\u3001\u7570\u5e38\u6642\u306e\u307f\u901a\u77e5</li> <li>\u7aef\u672b\u611f\u67d3\u8010\u6027: \u7ba1\u7406\u64cd\u4f5c\u3092\u7269\u7406\u5206\u96e2\u3057\u3001\u30b2\u30fc\u30df\u30f3\u30b0PC\u611f\u67d3\u6642\u306eVLAN\u30d0\u30a4\u30d1\u30b9\u3092\u9632\u6b62</li> <li>\u4f1a\u793ePC\u5206\u96e2: Guest VLAN\u63a5\u7d9a\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u308a\u3001\u4f1a\u793e\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u306e\u6ce2\u53ca\u3092\u9632\u6b62</li> </ul>"},{"location":"decisions/004-remote-access-separation-2026-02/","title":"ADR-004: \u5916\u90e8\u30a2\u30af\u30bb\u30b9\u57fa\u76e4\u306e\u8cac\u52d9\u5206\u96e2 \u2014 Cloudflare Zero Trust \u00d7 Tailscale","text":""},{"location":"decisions/004-remote-access-separation-2026-02/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>\u627f\u8a8d</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":""},{"location":"decisions/004-remote-access-separation-2026-02/#_3","title":"\u80cc\u666f","text":"<p>\u30db\u30fc\u30e0\u30e9\u30dc\u306e\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u57fa\u76e4\u3068\u3057\u3066 Cloudflare Zero Trust\uff08\u4ee5\u4e0b CF ZT\uff09\u3068 Tailscale \u3092\u4f75\u7528\u3057\u3066\u3044\u308b\u304c\u3001\u4e21\u8005\u306e\u8cac\u52d9\u5883\u754c\u304c\u66d6\u6627\u3067\u3042\u3063\u305f\u3002\u4ee5\u4e0b\u306e\u6226\u7565\u7684\u9078\u629e\u80a2\u3092\u691c\u8a0e\u3057\u305f:</p> <ol> <li>CF ZT \u4e00\u5143\u7ba1\u7406: Tailscale \u3092\u5ec3\u6b62\u3057 CF ZT \u306b\u7d71\u5408</li> <li>Tailscale \u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u5316: CF \u969c\u5bb3\u6642\u306e\u307f Tailscale \u3092\u4f7f\u7528</li> <li>\u8cac\u52d9\u5206\u96e2: \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3\uff08CF ZT\uff09\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\uff08Tailscale\uff09\u3092\u660e\u78ba\u306b\u5206\u96e2</li> </ol> <p>\u307e\u305f\u3001Tailscale \u306e coordination server \u3092\u81ea\u524d\u3067\u904b\u7528\u3059\u308b Headscale \u3078\u306e\u79fb\u884c\u3082\u691c\u8a0e\u3057\u305f\u3002</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#_4","title":"\u73fe\u72b6\u306e\u69cb\u6210","text":"\u7d4c\u8def \u7528\u9014 \u5229\u7528\u8005 CF Tunnel (HTTP) Web UI\uff08VW, Forgejo, Panel\uff09 \u81ea\u5206\u30fb\u6bcd\u30fb\u53cb\u4eba CF Tunnel (Private Network) + WARP \u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a \u81ea\u5206\u30fb\u6bcd\u30fb\u53cb\u4eba Tailscale \u7ba1\u7406\u30a2\u30af\u30bb\u30b9\uff08SSH, PVE WebUI, Grafana\uff09 \u7ba1\u7406\u8005\u306e\u307f <p>Tailscale \u306f\u7ba1\u7406\u7aef\u672b\uff08VLAN 90\uff09\u306b\u306e\u307f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u304a\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u306f PVE-3 \u306e\u307f\u3002</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#_5","title":"\u8105\u5a01\u30e2\u30c7\u30eb","text":"<p>\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u57fa\u76e4\u306b\u5bfe\u3059\u308b\u653b\u6483\u30d9\u30af\u30c8\u30eb\u3092\u5206\u6790\u3057\u305f:</p> \u30ab\u30c6\u30b4\u30ea \u653b\u6483\u30d9\u30af\u30c8\u30eb CF ZT \u4e00\u5143\u7ba1\u7406\u6642\u306e\u5f71\u97ff \u8cac\u52d9\u5206\u96e2\u6642\u306e\u5f71\u97ff \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3 CF Dashboard \u4e57\u3063\u53d6\u308a \u5168\u6ec5: \u30b5\u30fc\u30d3\u30b9 + \u7ba1\u7406\u306e\u5168\u7d4c\u8def\u304c\u638c\u63e1\u3055\u308c\u308b \u30b5\u30fc\u30d3\u30b9\u7d4c\u8def\u306e\u307f\u3002\u7ba1\u7406\u30d7\u30ec\u30fc\u30f3\u306f\u7121\u50b7 \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3 Tailscale \u30a2\u30ab\u30a6\u30f3\u30c8\u4e57\u3063\u53d6\u308a N/A\uff08\u5ec3\u6b62\u6e08\u307f\uff09 \u7ba1\u7406\u7d4c\u8def\u306e\u307f\u3002ACL + SSH\u516c\u958b\u9375\u8a8d\u8a3c\u3067\u88ab\u5bb3\u9650\u5b9a \u30b5\u30fc\u30d3\u30b9\u969c\u5bb3 Cloudflare \u5927\u898f\u6a21\u969c\u5bb3 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af: \u969c\u5bb3\u3092\u76f4\u3059\u305f\u3081\u306e\u7ba1\u7406\u7d4c\u8def\u3082\u6b62\u307e\u308b \u30b5\u30fc\u30d3\u30b9\u505c\u6b62\u306e\u307f\u3002Tailscale \u3067\u7ba1\u7406\u30fb\u5fa9\u65e7\u53ef\u80fd \u30b5\u30fc\u30d3\u30b9\u969c\u5bb3 Tailscale coordination server \u969c\u5bb3 N/A \u65e2\u5b58\u30c8\u30f3\u30cd\u30eb\u306f\u52d5\u304d\u7d9a\u3051\u308b\u3002\u65b0\u898f\u63a5\u7d9a\u306e\u307f\u4e0d\u53ef \u4e2d\u9593\u8005 CF Edge \u3067\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u508d\u53d7 \u7ba1\u7406 SSH \u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3082 CF \u306b\u9732\u51fa SSH \u306f Tailscale \u7d4c\u7531\uff08E2E, P2P\uff09\u3002CF \u306b\u7ba1\u7406\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306f\u6d41\u308c\u306a\u3044 \u4e2d\u9593\u8005 Tailscale coordination server \u306b\u3088\u308b\u4e0d\u6b63\u9375\u914d\u5e03 N/A \u7406\u8ad6\u4e0a\u53ef\u80fd\u3060\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u691c\u77e5\u53ef\u3002WireGuard \u306e E2E \u6697\u53f7\u5316\u306f\u7dad\u6301 \u4f9b\u7d66\u7db2\u653b\u6483 cloudflared \u30d0\u30a4\u30ca\u30ea\u6539\u3056\u3093 \u30b5\u30fc\u30d3\u30b9 + \u7ba1\u7406\u306e\u5168\u7d4c\u8def\u304c\u4fb5\u5bb3 \u30b5\u30fc\u30d3\u30b9\u7d4c\u8def\u306e\u307f \u4f9b\u7d66\u7db2\u653b\u6483 Tailscale \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6539\u3056\u3093 N/A \u7ba1\u7406\u7d4c\u8def\u306e\u307f\u3002\u88ab\u5bb3\u306fPVE\u30d9\u30a2\u30e1\u30bf\u30eb\u3078\u306eSSH\u306b\u9650\u5b9a <p>\u6700\u5927\u306e\u30ea\u30b9\u30af: CF ZT \u4e00\u5143\u7ba1\u7406\u306b\u304a\u3051\u308b CF \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3</p> <p>CF Dashboard \u3092\u596a\u53d6\u3057\u305f\u653b\u6483\u8005\u306f\u4ee5\u4e0b\u304c\u53ef\u80fd: - Tunnel \u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u6539\u3056\u3093\u3057\u3001\u5185\u90e8\u30b5\u30fc\u30d3\u30b9\u3092\u653b\u6483\u8005\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u5411\u3051\u308b - Access Policy \u3092\u5909\u66f4\u3057\u3001\u653b\u6483\u8005\u81ea\u8eab\u306b\u30a2\u30af\u30bb\u30b9\u3092\u4ed8\u4e0e - \u7ba1\u7406 SSH \u63a5\u7d9a\u5148\u3092\u66f8\u304d\u63db\u3048\u3001MITM \u3067\u8a8d\u8a3c\u60c5\u5831\u3092\u7a83\u53d6</p> <p>\u8cac\u52d9\u304c\u5206\u96e2\u3055\u308c\u3066\u3044\u308c\u3070\u3001CF \u304c\u5b8c\u5168\u306b\u4fb5\u5bb3\u3055\u308c\u3066\u3082\u7ba1\u7406\u30d7\u30ec\u30fc\u30f3\uff08Tailscale\uff09\u306f\u72ec\u7acb\u3057\u305f\u8a8d\u8a3c\u30fb\u7d4c\u8def\u3067\u52d5\u4f5c\u3057\u7d9a\u3051\u308b\u3002</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#_6","title":"\u6c7a\u5b9a","text":""},{"location":"decisions/004-remote-access-separation-2026-02/#1","title":"1. \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u306e\u5206\u96e2","text":"<p>2\u3064\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u5bfe\u7b49\u306a\u300c2\u3064\u306eVPN\u300d\u3067\u306f\u306a\u304f\u3001\u7570\u306a\u308b\u30ec\u30a4\u30e4\u30fc\u306e\u8cac\u52d9\u3092\u6301\u3064:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3: Cloudflare Zero Trust                 \u2502\n\u2502                                                      \u2502\n\u2502  \u30fbWeb UI (Vaultwarden, Forgejo, Pterodactyl Panel)  \u2502\n\u2502  \u30fb\u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a (WARP + Private Network)         \u2502\n\u2502  \u30fbGrafana \u95b2\u89a7 (read-only \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9)             \u2502\n\u2502                                                      \u2502\n\u2502  \u5229\u7528\u8005: \u81ea\u5206\u30fb\u6bcd\u30fb\u53cb\u4eba                                \u2502\n\u2502  \u7d4c\u8def: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u2192 CF Edge \u2192 cloudflared \u2192 \u30b5\u30fc\u30d3\u30b9  \u2502\n\u2502  \u7279\u6027: CF Edge \u304c\u4e2d\u9593\u8005\u3001HTTP/TCP \u30d7\u30ed\u30ad\u30b7              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3: Tailscale                       \u2502\n\u2502                                                      \u2502\n\u2502  \u30fbSSH (PVE \u30d9\u30a2\u30e1\u30bf\u30eb\u7dca\u6025\u7ba1\u7406)                        \u2502\n\u2502  \u30fbPVE WebUI (8006)                                  \u2502\n\u2502  \u30fbGrafana \u7ba1\u7406 (\u8a2d\u5b9a\u5909\u66f4\u3001\u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u7de8\u96c6)           \u2502\n\u2502  \u30fbCF \u969c\u5bb3\u6642\u306e\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af                            \u2502\n\u2502                                                      \u2502\n\u2502  \u5229\u7528\u8005: \u7ba1\u7406\u8005\u306e\u307f (\u7ba1\u7406\u7aef\u672b VLAN 90)                  \u2502\n\u2502  \u7d4c\u8def: \u7ba1\u7406\u7aef\u672b \u2190\u2192 PVE (P2P WireGuard)                \u2502\n\u2502  \u7279\u6027: E2E \u6697\u53f7\u5316\u3001P2P \u76f4\u63a5\u63a5\u7d9a\u3001\u4e2d\u9593\u8005\u306a\u3057             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"decisions/004-remote-access-separation-2026-02/#2-tailscale-saas-headscale","title":"2. Tailscale SaaS \u3092\u7dad\u6301\uff08Headscale \u306f\u4e0d\u63a1\u7528\uff09","text":"<p>Headscale\uff08\u81ea\u524d coordination server\uff09\u3092\u691c\u8a0e\u3057\u305f\u304c\u3001\u4e0d\u63a1\u7528\u3068\u3059\u308b\u3002</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#headscale","title":"Headscale \u306e\u9d8f\u3068\u5375\u554f\u984c","text":"\u914d\u7f6e\u5148 \u554f\u984c PVE \u30af\u30e9\u30b9\u30bf\u4e0a\u306e VM PVE \u969c\u5bb3 \u2192 Headscale \u6b7b\u4ea1 \u2192 PVE \u306b\u7ba1\u7406\u63a5\u7d9a\u4e0d\u80fd \u2192 \u5fa9\u65e7\u4e0d\u80fd\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u306e\u5b58\u5728\u610f\u7fa9\u304c\u6d88\u6ec5 backup-node (VLAN 240) inbound \u30bc\u30ed\u306e\u9694\u96e2\u539f\u5247\u306b\u9055\u53cd\u3002\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u516c\u958b\u3059\u308b\u8a2d\u8a08\u77db\u76fe \u7ba1\u7406\u7aef\u672b (RPi) RPi \u5358\u4f53\u6545\u969c\u3067\u7ba1\u7406\u7d4c\u8def\u304c\u5168\u6d88\u5931\u3002SPOF \u305d\u306e\u3082\u306e \u5916\u90e8 VPS \u30b3\u30b9\u30c8\u5897 + VPS \u81ea\u4f53\u306e\u7ba1\u7406\u8ca0\u8377 + VPS \u4fb5\u5bb3\u3067 tailnet \u306e\u5236\u5fa1\u6a29\u3092\u5931\u3046 <p>Tailscale \u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u306b\u4f7f\u3046\u76ee\u7684\u306f\u300c\u81ea\u5206\u306e\u30a4\u30f3\u30d5\u30e9\u304c\u58ca\u308c\u305f\u6642\u3067\u3082\u7ba1\u7406\u7d4c\u8def\u3092\u78ba\u4fdd\u3059\u308b\u300d\u3053\u3068\u3002\u305d\u306e\u7ba1\u7406\u7d4c\u8def\u306e\u4f9d\u5b58\u5148\u304c\u81ea\u5206\u306e\u30a4\u30f3\u30d5\u30e9\u4e0a\u306b\u3042\u3063\u305f\u3089\u3001\u76ee\u7684\u3068\u77db\u76fe\u3059\u308b\u3002</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#wireguard-tailscale-saas","title":"WireGuard \u306e\u8a2d\u8a08\u304c Tailscale SaaS \u306e\u30ea\u30b9\u30af\u3092\u8efd\u6e1b","text":"\u61f8\u5ff5 \u5b9f\u614b Tailscale \u793e\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u898b\u3048\u308b \u898b\u3048\u308b\u306e\u306f\u300c\u30c7\u30d0\u30a4\u30b9X \u304c \u6642\u523bY \u306b IP\u30a2\u30c9\u30ec\u30b9Z \u304b\u3089\u63a5\u7d9a\u300d\u7a0b\u5ea6\u3002\u901a\u4fe1\u5185\u5bb9\u306f WireGuard E2E \u6697\u53f7\u5316\u3067\u5fa9\u53f7\u4e0d\u53ef\u3002\u30db\u30fc\u30e0\u30e9\u30dc\u306e\u63a5\u7d9a\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u5b9f\u5bb3\u304c\u6975\u3081\u3066\u5c0f\u3055\u3044 Tailscale \u793e\u304c\u60aa\u610f\u306e\u9375\u3092 push \u7406\u8ad6\u4e0a\u306f coordination server \u304c\u4e0d\u6b63\u30d4\u30a2\u306e\u516c\u958b\u9375\u3092\u914d\u5e03\u53ef\u80fd\u3002\u305f\u3060\u3057\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u691c\u77e5\u53ef\u80fd\u3067\u3042\u308a\u3001Tailscale \u793e\u306e\u30d3\u30b8\u30cd\u30b9\u3092\u7834\u58ca\u3059\u308b\u884c\u70ba\u3002\u73fe\u5b9f\u7684\u8105\u5a01\u3067\u306f\u306a\u3044 coordination server \u969c\u5bb3 \u65e2\u5b58\u306e WireGuard \u30c8\u30f3\u30cd\u30eb\u306f\u52d5\u304d\u7d9a\u3051\u308b\u3002coordination server \u306f\u9375\u4ea4\u63db\u306e\u4ef2\u4ecb\u306e\u307f\u3067\u3001\u78ba\u7acb\u6e08\u307f\u63a5\u7d9a\u306b\u306f\u4e0d\u8981 \u30a2\u30ab\u30a6\u30f3\u30c8\u4e57\u3063\u53d6\u308a \u672cADR\u306e\u30bb\u30af\u30b7\u30e7\u30f36\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u5f37\u5316\u300d\u3067\u5bfe\u7b56"},{"location":"decisions/004-remote-access-separation-2026-02/#headscale_1","title":"Headscale \u304c\u610f\u5473\u3092\u6301\u3064\u30b1\u30fc\u30b9\uff08\u672c\u74b0\u5883\u306b\u306f\u8a72\u5f53\u3057\u306a\u3044\uff09","text":"<ul> <li>\u30c7\u30d0\u30a4\u30b9 100\u53f0\u8d85\u3067 Tailscale \u7121\u6599\u67a0\u3092\u8d85\u904e\u3059\u308b\u5834\u5408</li> <li>\u898f\u5236\u74b0\u5883\u3067\u5916\u90e8 coordination server \u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u5834\u5408</li> <li>coordination server \u3092\u5b8c\u5168\u306b\u81ea\u5df1\u7ba1\u7406\u3057\u305f\u3044\u77e5\u7684\u597d\u5947\u5fc3\uff08\u305f\u3060\u3057\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u306e\u53ef\u7528\u6027\u3068\u5f15\u304d\u63db\u3048\uff09</li> </ul>"},{"location":"decisions/004-remote-access-separation-2026-02/#3-tailscale-pve","title":"3. Tailscale \u306e\u30b5\u30fc\u30d0\u30fc\u5074\u914d\u7f6e: \u5168 PVE \u30d9\u30a2\u30e1\u30bf\u30eb","text":"\u914d\u7f6e\u6848 \u5229\u70b9 \u6b20\u70b9 PVE-3 \u306e\u307f\uff08\u73fe\u72b6\uff09 \u653b\u6483\u9762\u6700\u5c0f PVE-3 \u969c\u5bb3\u3067\u7ba1\u7406\u4e0d\u80fd \u5168 PVE \u30d9\u30a2\u30e1\u30bf\u30eb\uff08\u63a1\u7528\uff09 \u3069\u308c\u304b1\u53f0\u751f\u5b58\u3067\u7ba1\u7406\u53ef\u80fd \u653b\u6483\u9762\u304c\u5897\u52a0\uff08ACL\u3067\u8efd\u6e1b\uff09 \u5c02\u7528\u30b8\u30e3\u30f3\u30d7\u30db\u30b9\u30c8 VM \u9694\u96e2\u30fb\u30cf\u30fc\u30c9\u30cb\u30f3\u30b0\u53ef VM \u306f Ceph \u4f9d\u5b58\u3002\u5168 PVE \u969c\u5bb3\u306b\u8106\u5f31 <p>\u5168 PVE \u30d9\u30a2\u30e1\u30bf\u30eb\u306b Tailscale \u3092\u914d\u7f6e\u3059\u308b\u6839\u62e0:</p> <ul> <li>\u300cPVE \u5168\u53f0\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af\u300d\u306f ADR-003 \u3067\u60f3\u5b9a\u6e08\u307f\u306e\u8105\u5a01\u3002\u3060\u304c\u300c1\u53f0\u3060\u3051\u751f\u5b58\u300d\u306e\u78ba\u7387\u306e\u307b\u3046\u304c\u9ad8\u304f\u3001\u305d\u306e1\u53f0\u304b\u3089\u5fa9\u65e7\u3092\u958b\u59cb\u3067\u304d\u308b</li> <li>\u30d9\u30a2\u30e1\u30bf\u30eb\u306a\u306e\u3067 Ceph / VM \u306b\u4f9d\u5b58\u3057\u306a\u3044</li> <li>Tailscale ACL \u3067\u7ba1\u7406\u7aef\u672b\u4ee5\u5916\u304b\u3089\u306e\u63a5\u7d9a\u3092\u62d2\u5426\u3059\u308c\u3070\u3001\u653b\u6483\u9762\u306e\u5897\u52a0\u306f\u6700\u5c0f\u9650</li> <li>VM / LXC \u306b\u306f\u5165\u308c\u306a\u3044\uff08PVE \u30b3\u30f3\u30bd\u30fc\u30eb\u7d4c\u7531\u3067\u5230\u9054\u53ef\u80fd\u306a\u305f\u3081\u4e0d\u8981\uff09</li> </ul> <p>\u914d\u7f6e\u5bfe\u8c61:</p> \u30ce\u30fc\u30c9 Tailscale \u7406\u7531 PVE-1 (CPU \u30ef\u30fc\u30ab\u30fc) \u3042\u308a \u30d9\u30a2\u30e1\u30bf\u30eb\u7dca\u6025\u7ba1\u7406 PVE-2 (CPU \u30ef\u30fc\u30ab\u30fc) \u3042\u308a \u30d9\u30a2\u30e1\u30bf\u30eb\u7dca\u6025\u7ba1\u7406 PVE-3 (Lab CP) \u3042\u308a\uff08\u65e2\u5b58\uff09 \u30d9\u30a2\u30e1\u30bf\u30eb\u7dca\u6025\u7ba1\u7406 PVE-GPU (HP Z8 G4) \u3042\u308a \u30d9\u30a2\u30e1\u30bf\u30eb\u7dca\u6025\u7ba1\u7406 PVE-DMZ-1 (M90q) \u3042\u308a DMZ \u30ce\u30fc\u30c9\u7dca\u6025\u7ba1\u7406 \u7ba1\u7406\u7aef\u672b (VLAN 90) \u3042\u308a\uff08\u65e2\u5b58\uff09 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 VM / LXC \u306a\u3057 PVE \u30b3\u30f3\u30bd\u30fc\u30eb\u7d4c\u7531\u3067\u5230\u9054\u53ef\u80fd backup-node \u306a\u3057 VLAN 240 \u306e\u9694\u96e2\u539f\u5247\u3092\u7dad\u6301 \u30b2\u30fc\u30df\u30f3\u30b0 PC \u306a\u3057 \u7ba1\u7406\u6a29\u9650\u3092\u4e00\u5207\u7f6e\u304b\u306a\u3044\uff08ADR-003\uff09"},{"location":"decisions/004-remote-access-separation-2026-02/#4-tailscale-acl","title":"4. Tailscale ACL \u306e\u30ed\u30c3\u30af\u30c0\u30a6\u30f3","text":"<p>Tailscale ACL \u3092\u6700\u5c0f\u6a29\u9650\u306b\u8a2d\u5b9a\u3059\u308b:</p> <pre><code>{\n  \"acls\": [\n    // \u7ba1\u7406\u7aef\u672b \u2192 PVE \u30d9\u30a2\u30e1\u30bf\u30eb: SSH + PVE WebUI \u306e\u307f\n    {\n      \"action\": \"accept\",\n      \"src\": [\"tag:mgmt\"],\n      \"dst\": [\n        \"tag:pve:22\",      // SSH\n        \"tag:pve:8006\"     // Proxmox WebUI\n      ]\n    },\n    // \u7ba1\u7406\u7aef\u672b \u2192 PVE \u30d9\u30a2\u30e1\u30bf\u30eb: Grafana (\u8a2d\u5b9a\u5909\u66f4\u6642\u306e\u307f)\n    {\n      \"action\": \"accept\",\n      \"src\": [\"tag:mgmt\"],\n      \"dst\": [\"tag:pve-cp:3000\"]  // Grafana on PVE-3\n    }\n  ],\n\n  // \u6697\u9ed9\u306e deny-all: \u4e0a\u8a18\u4ee5\u5916\u306f\u5168\u3066\u62d2\u5426\n\n  \"tagOwners\": {\n    \"tag:mgmt\": [\"autogroup:admin\"],\n    \"tag:pve\":  [\"autogroup:admin\"],\n    \"tag:pve-cp\": [\"autogroup:admin\"]\n  },\n\n  \"nodeAttrs\": [\n    {\n      // \u5168\u30ce\u30fc\u30c9\u306e\u9375\u6709\u52b9\u671f\u9650\u3092 90 \u65e5\u306b\u5f37\u5236\n      \"target\": [\"*\"],\n      \"attr\":   [\"autoApprovers:exitNode=false\"]\n    }\n  ]\n}\n</code></pre> <p>\u30dd\u30a4\u30f3\u30c8: - PVE \u30ce\u30fc\u30c9\u9593\u306e Tailscale \u7d4c\u7531\u901a\u4fe1\u306f\u8a31\u53ef\u3057\u306a\u3044\uff08VLAN 200/250 \u3067\u76f4\u63a5\u901a\u4fe1\u3059\u308b\uff09 - \u7ba1\u7406\u7aef\u672b\u4ee5\u5916\u306e\u30c7\u30d0\u30a4\u30b9\u304c tailnet \u306b\u53c2\u52a0\u3057\u3066\u3082\u3001ACL \u3067\u5230\u9054\u5148\u304c\u30bc\u30ed - Exit Node \u6a5f\u80fd\u306f\u7121\u52b9\u5316\uff08Tailscale \u7d4c\u7531\u3067\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u51fa\u308b\u5fc5\u8981\u304c\u306a\u3044\uff09</p>"},{"location":"decisions/004-remote-access-separation-2026-02/#5","title":"5. \u65e5\u5e38\u904b\u7528\u3068\u7dca\u6025\u6642\u306e\u4f7f\u3044\u5206\u3051","text":"\u5834\u9762 \u7d4c\u8def \u7406\u7531 Grafana \u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u95b2\u89a7 CF Tunnel \u65e5\u5e38\u7684\u306a read-only \u64cd\u4f5c Grafana \u306e\u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u5909\u66f4 Tailscale \u30a4\u30f3\u30d5\u30e9\u8a2d\u5b9a\u5909\u66f4\u306f\u7ba1\u7406\u30d7\u30ec\u30fc\u30f3 Vaultwarden \u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u5229\u7528 CF Tunnel \u65e5\u5e38\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u5229\u7528 Forgejo \u3067\u30b3\u30fc\u30c9\u95b2\u89a7\u30fbpush CF Tunnel \u65e5\u5e38\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u5229\u7528 PVE WebUI \u3067 VM \u64cd\u4f5c Tailscale \u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u7ba1\u7406 SSH \u3067\u30b5\u30fc\u30d0\u30fc\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9 Tailscale \u30a4\u30f3\u30d5\u30e9\u7ba1\u7406 CF \u969c\u5bb3\u6642\u306e\u30b5\u30fc\u30d3\u30b9\u78ba\u8a8d Tailscale \u2192 PVE \u2192 VM \u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af PVE \u969c\u5bb3\u6642\u306e\u7dca\u6025\u5fa9\u65e7 Tailscale \u2192 \u751f\u5b58\u30d9\u30a2\u30e1\u30bf\u30eb \u6700\u7d42\u624b\u6bb5 \u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a\uff08\u81ea\u5b85\uff09 VLAN 10 \u76f4\u63a5 \u6700\u4f4e\u30ec\u30a4\u30c6\u30f3\u30b7 \u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a\uff08\u5916\u51fa\u5148\uff09 CF WARP \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3 \u53cb\u4eba\u306e\u30b2\u30fc\u30e0\u63a5\u7d9a CF WARP / playit.gg \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3"},{"location":"decisions/004-remote-access-separation-2026-02/#6-tailscale","title":"6. Tailscale \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u5f37\u5316","text":"<p>Tailscale SaaS \u3092\u7dad\u6301\u3059\u308b\u4ee5\u4e0a\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3\u304c\u6700\u5927\u306e\u30ea\u30b9\u30af\u3002\u4ee5\u4e0b\u3067\u5bfe\u7b56:</p> \u5bfe\u7b56 \u8aac\u660e MFA \u3092\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30ad\u30fc\u306b\u9650\u5b9a FIDO2/WebAuthn (YubiKey)\u3002TOTP\u30fbSMS \u306f\u7121\u52b9\u5316 \u30c7\u30d0\u30a4\u30b9\u627f\u8a8d\u3092\u624b\u52d5\u306b\u8a2d\u5b9a auto-approve \u7121\u52b9\u3002\u65b0\u30c7\u30d0\u30a4\u30b9\u8ffd\u52a0\u306b\u306f\u7ba1\u7406\u8005\u306e\u660e\u793a\u7684\u627f\u8a8d\u304c\u5fc5\u8981 Key expiry \u3092\u6709\u52b9\u5316 90\u65e5\u3054\u3068\u306b\u518d\u8a8d\u8a3c\u3092\u5f37\u5236\u3002\u76d7\u307e\u308c\u305f\u9375\u306e\u6709\u52b9\u671f\u9593\u3092\u9650\u5b9a Tailscale SSH \u3092\u7121\u52b9\u5316 SSH \u8a8d\u8a3c\u306f OS \u30ec\u30d9\u30eb\u306e\u516c\u958b\u9375\u8a8d\u8a3c\u3067\u884c\u3046\u3002Tailscale \u306e SSH \u6a5f\u80fd\u306b\u4f9d\u5b58\u3057\u306a\u3044 Auth key \u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u306a\u3044 Tailscale \u306e auth key \u306f SOPS \u6697\u53f7\u5316\u3067\u7ba1\u7406"},{"location":"decisions/004-remote-access-separation-2026-02/#7-grafana-cf-tunnel","title":"7. Grafana \u306e CF Tunnel \u516c\u958b\uff08\u65b0\u898f\uff09","text":"<p>Grafana \u3092 CF Tunnel \u7d4c\u7531\u3067\u3082\u95b2\u89a7\u53ef\u80fd\u306b\u3059\u308b\u3002\u65e5\u5e38\u7684\u306a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\u3092 CF \u7d4c\u7531\u306b\u79fb\u884c\u3057\u3001Tailscale \u306f\u7ba1\u7406\u64cd\u4f5c\uff08\u8a2d\u5b9a\u5909\u66f4\uff09\u6642\u306e\u307f\u4f7f\u7528\u3059\u308b\u3002</p> \u9805\u76ee \u5024 \u30db\u30b9\u30c8\u540d grafana.example.com \u5185\u90e8\u30b5\u30fc\u30d3\u30b9 http://10.0.200.31:3000 CF Access Policy Admins \u306e\u307f Grafana \u5074\u8a2d\u5b9a CF \u7d4c\u7531\u30a2\u30af\u30bb\u30b9\u306f Viewer \u30ed\u30fc\u30eb\uff08read-only\uff09 \u7ba1\u7406\u64cd\u4f5c Tailscale \u7d4c\u7531\u306e\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3067 Admin \u30ed\u30fc\u30eb"},{"location":"decisions/004-remote-access-separation-2026-02/#_7","title":"\u7d50\u679c","text":"<ul> <li>\u8cac\u52d9\u5206\u96e2: \u30c7\u30fc\u30bf\u30d7\u30ec\u30fc\u30f3\uff08CF ZT\uff09\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\uff08Tailscale\uff09\u3092\u660e\u78ba\u306b\u5206\u96e2\u3002\u4e00\u65b9\u306e\u4fb5\u5bb3\u304c\u4ed6\u65b9\u306b\u6ce2\u53ca\u3057\u306a\u3044</li> <li>CF \u969c\u5bb3\u8010\u6027: CF \u5927\u898f\u6a21\u969c\u5bb3\u6642\u3082 Tailscale \u7d4c\u7531\u3067\u5168 PVE \u30ce\u30fc\u30c9\u3092\u7ba1\u7406\u53ef\u80fd\u3002\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f</li> <li>CF \u30a2\u30ab\u30a6\u30f3\u30c8\u4fb5\u5bb3\u8010\u6027: CF Dashboard \u304c\u4e57\u3063\u53d6\u3089\u308c\u3066\u3082\u3001\u7ba1\u7406\u30d7\u30ec\u30fc\u30f3\uff08Tailscale\uff09\u306f\u72ec\u7acb\u3057\u305f\u8a8d\u8a3c\u30fb\u7d4c\u8def\u3067\u52d5\u4f5c\u3002\u653b\u6483\u8005\u306f\u7ba1\u7406 SSH \u306b\u5230\u9054\u4e0d\u53ef</li> <li>PVE \u90e8\u5206\u969c\u5bb3\u8010\u6027: \u5168\u30d9\u30a2\u30e1\u30bf\u30eb\u306b Tailscale \u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u30011\u53f0\u3067\u3082\u751f\u5b58\u3059\u308c\u3070\u305d\u3053\u304b\u3089\u5fa9\u65e7\u958b\u59cb\u53ef\u80fd</li> <li>Headscale \u4e0d\u63a1\u7528: \u9d8f\u3068\u5375\u554f\u984c\u306b\u3088\u308a\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u306e\u4f9d\u5b58\u5148\u3092\u81ea\u30a4\u30f3\u30d5\u30e9\u306b\u7f6e\u304f\u77db\u76fe\u3092\u56de\u907f</li> <li>\u904b\u7528\u8ca0\u8377: Tailscale SaaS \u306e\u305f\u3081 coordination server \u306e\u904b\u7528\u4e0d\u8981\u3002ACL \u8a2d\u5b9a\u306e\u307f\u7ba1\u7406</li> <li>\u30b3\u30b9\u30c8: Tailscale \u7121\u6599\u67a0\u5185\uff08\u30c7\u30d0\u30a4\u30b9\u6570 &lt; 100\u3001\u30e6\u30fc\u30b6\u30fc\u6570 &lt; 3\uff09</li> <li>Grafana \u4e8c\u91cd\u516c\u958b: \u65e5\u5e38\u95b2\u89a7\u306f CF Tunnel\uff08Viewer\uff09\u3001\u7ba1\u7406\u64cd\u4f5c\u306f Tailscale\uff08Admin\uff09\u3067\u6a29\u9650\u5206\u96e2</li> </ul>"},{"location":"decisions/004-remote-access-separation-2026-02/#adr","title":"\u95a2\u9023 ADR","text":"<ul> <li>ADR-003: \u7ba1\u7406\u7aef\u672b\u306e\u7269\u7406\u5206\u96e2\uff08VLAN 90\uff09\u3001\u30b2\u30fc\u30df\u30f3\u30b0 PC \u304b\u3089\u306e Tailscale \u6392\u9664</li> </ul>"},{"location":"decisions/005-dmz-network-isolation-2026-02/","title":"ADR-005: DMZ \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7269\u7406\u5206\u96e2 \u2014 \u5c02\u7528\u30b9\u30a4\u30c3\u30c1 FW \u76f4\u7d50\u69cb\u6210","text":""},{"location":"decisions/005-dmz-network-isolation-2026-02/#_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9","text":"<p>\u627f\u8a8d</p>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_2","title":"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8","text":""},{"location":"decisions/005-dmz-network-isolation-2026-02/#_3","title":"\u80cc\u666f","text":"<p>DMZ \u30bb\u30b0\u30e1\u30f3\u30c8\uff08VLAN 100\uff09\u306f\u5916\u90e8\u516c\u958b\u30b5\u30fc\u30d3\u30b9\u3092\u53ce\u5bb9\u3059\u308b\u6700\u9ad8\u30ea\u30b9\u30af\u30be\u30fc\u30f3\u3060\u304c\u3001\u73fe\u72b6\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u306f\u4ee5\u4e0b\u306e\u554f\u984c\u3092\u62b1\u3048\u3066\u3044\u308b:</p> <ol> <li>\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u7d4c\u7531: PVE-DMZ-1 \u304c\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\uff08CRS305-1G-4S+\uff09\u306e\u30dd\u30fc\u30c84\u306b\u76f4\u7d50\u3002DMZ \u30d5\u30ec\u30fc\u30e0\u304c\u5185\u90e8 VLAN\uff0810/20/21/30/90/200/240/250\uff09\u306e\u30d5\u30ec\u30fc\u30e0\u3068\u540c\u4e00\u7269\u7406\u30b9\u30a4\u30c3\u30c1\u4e0a\u3092\u901a\u904e\u3059\u308b</li> <li>\u30dd\u30fc\u30c8\u67af\u6e07: CRS305 \u306e SFP+ 4\u30dd\u30fc\u30c8\u304c\u5168\u3066\u4f7f\u7528\u4e2d\uff08FW, Access SW, Lab SW, DMZ\uff09\u3002PVE-DMZ-2 \u3092\u8ffd\u52a0\u3059\u308b\u7269\u7406\u30dd\u30fc\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044</li> <li>MikroTik \u8106\u5f31\u6027\u30ea\u30b9\u30af: RouterOS \u306f 2025\u5e74\u3060\u3051\u3067 CVSS 9.4 \u7d1a\u306e\u8106\u5f31\u6027\u304c7\u4ef6\u5831\u544a\u3055\u308c\u3066\u3044\u308b\uff08ADR-001\uff09\u3002\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u306e\u4fb5\u5bb3\u304c\u5168 VLAN \u306b\u6ce2\u53ca\u3059\u308b\u69cb\u9020</li> <li>\u8a2d\u8a08\u539f\u5247\u3068\u306e\u77db\u76fe: Lab\uff08CRS309\uff09\u3084\u30e6\u30fc\u30b6\u30fc\u30a2\u30af\u30bb\u30b9\uff08CRS328\uff09\u306b\u306f\u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u304c\u3042\u308b\u306e\u306b\u3001\u6700\u3082\u653b\u6483\u9762\u306e\u5927\u304d\u3044 DMZ \u3060\u3051\u304c\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u76f4\u7d50</li> </ol>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_4","title":"\u73fe\u72b6\u306e\u30c8\u30dd\u30ed\u30b8\u30fc","text":"<pre><code>Internet \u2192 ONU \u2192 VP2440 \u2500SFP+ 1\u2500\u2192 CRS305 (Core)\n                                     \u251c\u2500 Port 1: FW (VP2440)\n                                     \u251c\u2500 Port 2: CRS328 (Access)\n                                     \u251c\u2500 Port 3: CRS309 (Lab)\n                                     \u2514\u2500 Port 4: PVE-DMZ-1 \u2190 DMZ \u304c\u76f4\u7d50\n</code></pre>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#vp2440","title":"VP2440 \u30dd\u30fc\u30c8\u69cb\u6210\u306e\u8aa4\u8a18\u4fee\u6b63","text":"<p><code>docs/hardware.md</code> \u306b\u300c4x 2.5GbE, 10G SFP+\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u305f\u304c\u3001\u5b9f\u969b\u306e VP2440 \u4ed5\u69d8\u306f\u4ee5\u4e0b\u306e\u901a\u308a:</p> \u30dd\u30fc\u30c8 \u30c1\u30c3\u30d7\u30bb\u30c3\u30c8 \u5b9f\u6570 2.5GbE RJ45 Intel I226-V 2 10G SFP+ Intel X710-BM2 2 <p>\u73fe\u5728\u306e\u4f7f\u7528\u72b6\u6cc1:</p> \u30dd\u30fc\u30c8 \u7528\u9014 \u72b6\u614b 2.5GbE 1 WAN\uff08ONU\uff09 \u4f7f\u7528\u4e2d SFP+ 1 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\uff0810Gbps trunk\uff09 \u4f7f\u7528\u4e2d SFP+ 2 - \u7a7a\u304d 2.5GbE 2 - \u7a7a\u304d <p>SFP+ \u306e\u7a7a\u304d\u30dd\u30fc\u30c8\u304c1\u3064\u3042\u308b\u305f\u3081\u3001DMZ \u30b9\u30a4\u30c3\u30c1\u306e FW \u76f4\u7d50\u304c\u7269\u7406\u7684\u306b\u5b9f\u73fe\u53ef\u80fd\u3067\u3042\u308b\u3002</p>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_5","title":"\u8105\u5a01\u30e2\u30c7\u30eb","text":"<p>DMZ \u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u65b9\u5f0f\u306b\u95a2\u3059\u308b\u653b\u6483\u30d9\u30af\u30c8\u30eb\u3092\u5206\u6790\u3057\u305f:</p> \u30ab\u30c6\u30b4\u30ea \u653b\u6483\u30d9\u30af\u30c8\u30eb \u73fe\u72b6\uff08\u30b3\u30a2SW\u76f4\u7d50\uff09\u306e\u30ea\u30b9\u30af DMZ SW FW\u76f4\u7d50\u6642\u306e\u30ea\u30b9\u30af SW \u8106\u5f31\u6027 RouterOS CVE \u3067\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u4fb5\u5bb3 \u5168 VLAN \u306e\u30d5\u30ec\u30fc\u30e0\u304c\u653b\u6483\u8005\u306b\u9732\u51fa\u3002DMZ \u2194 \u5185\u90e8\u306e L2 \u653b\u6483\u304c\u53ef\u80fd DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306f\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u901a\u904e\u3057\u306a\u3044\u305f\u3081\u7121\u95a2\u4fc2 VLAN \u30db\u30c3\u30d4\u30f3\u30b0 \u4e8c\u91cd\u30bf\u30ae\u30f3\u30b0\u653b\u6483 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u4e0a\u3067 DMZ \u3068\u5185\u90e8 VLAN \u304c\u540c\u5c45\u3057\u3066\u3044\u308b\u305f\u3081\u653b\u6483\u9762\u304c\u5b58\u5728 \u7269\u7406\u7684\u306b\u7570\u306a\u308b\u30b9\u30a4\u30c3\u30c1\u306e\u305f\u3081\u653b\u6483\u7d4c\u8def\u306a\u3057 DMZ \u30ce\u30fc\u30c9\u4fb5\u5bb3 PVE-DMZ-1 root \u596a\u53d6\u5f8c\u306e\u6a2a\u5c55\u958b \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u306e L2 \u30c6\u30fc\u30d6\u30eb\u3092\u6c5a\u67d3\u3057\u3001\u5185\u90e8 VLAN \u306e\u30d5\u30ec\u30fc\u30e0\u3092\u508d\u53d7\u3059\u308b\u53ef\u80fd\u6027 DMZ \u30b9\u30a4\u30c3\u30c1\u306e L2 \u30c6\u30fc\u30d6\u30eb\u6c5a\u67d3\u306f DMZ \u5185\u306b\u9650\u5b9a\u3002FW \u3092\u7a81\u7834\u3057\u306a\u3044\u9650\u308a\u5185\u90e8\u5230\u9054\u4e0d\u53ef \u7269\u7406\u30a2\u30af\u30bb\u30b9 \u30e9\u30c3\u30af\u5185\u30b1\u30fc\u30d6\u30eb\u5dee\u3057\u66ff\u3048 DMZ \u30dd\u30fc\u30c8\u304c\u5185\u90e8 VLAN \u30dd\u30fc\u30c8\u3068\u96a3\u63a5\uff08\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u306e Port 3 \u3068 Port 4\uff09 DMZ \u30b9\u30a4\u30c3\u30c1\u306f\u7269\u7406\u7684\u306b\u72ec\u7acb\u3002\u5dee\u3057\u66ff\u3048\u3066\u3082 DMZ \u5185\u306b\u9650\u5b9a FW \u4fb5\u5bb3 OPNsense root \u596a\u53d6 \u5168\u30bb\u30b0\u30e1\u30f3\u30c8\u5230\u9054\u53ef\u80fd \u5168\u30bb\u30b0\u30e1\u30f3\u30c8\u5230\u9054\u53ef\u80fd\uff08\u5909\u5316\u306a\u3057 \u2014 FW \u306f\u4e21\u69cb\u6210\u3067 Single Point\uff09"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_6","title":"\u691c\u8a0e\u3057\u305f\u9078\u629e\u80a2","text":"\u9078\u629e\u80a2 \u8aac\u660e \u8a55\u4fa1 A. DMZ SW \u3092\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u914d\u4e0b CRS305 Port 4 \u306b DMZ SW \u3092\u63a5\u7d9a \u30dd\u30fc\u30c8\u62e1\u5f35\u306e\u307f\u3002DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306f\u4f9d\u7136\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u901a\u904e\u3002\u7269\u7406\u5206\u96e2\u306b\u306a\u3089\u306a\u3044 B. DMZ SW \u3092 FW \u306b\u76f4\u7d50\uff08\u63a1\u7528\uff09 VP2440 SFP+ 2 \u306b DMZ SW \u3092\u63a5\u7d9a \u771f\u306e\u7269\u7406\u5206\u96e2\u3002\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u4e00\u5207\u901a\u904e\u3057\u306a\u3044\u3002FW \u304c\u76f4\u63a5 DMZ \u3092\u53ce\u5bb9 C. FW \u306e 2.5GbE \u30dd\u30fc\u30c8\u306b\u76f4\u7d50 PVE-DMZ-1 \u3092 VP2440 2.5GbE 2 \u306b\u76f4\u7d50 \u30b9\u30a4\u30c3\u30c1\u4e0d\u8981\u3060\u304c 2.5Gbps \u4e0a\u9650\u3002PVE-DMZ-2 \u8ffd\u52a0\u6642\u306b\u30dd\u30fc\u30c8\u304c\u8db3\u308a\u306a\u3044 D. \u73fe\u72b6\u7dad\u6301 \u5909\u66f4\u306a\u3057 PVE-DMZ-2 \u3092\u8ffd\u52a0\u3067\u304d\u306a\u3044\u3002\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u304c\u6b8b\u308b"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_7","title":"\u6c7a\u5b9a","text":""},{"location":"decisions/005-dmz-network-isolation-2026-02/#1-dmz-fw","title":"1. DMZ \u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u3092 FW \u306b\u76f4\u7d50","text":"<p>VP2440 \u306e SFP+ 2 \u306b DMZ \u5c02\u7528\u30b9\u30a4\u30c3\u30c1\u3092\u63a5\u7d9a\u3057\u3001DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u304b\u3089\u5b8c\u5168\u306b\u7269\u7406\u5206\u96e2\u3059\u308b\u3002</p> <p>\u5909\u66f4\u5f8c\u306e\u30c8\u30dd\u30ed\u30b8\u30fc:</p> <pre><code>Internet \u2192 ONU\n              \u2502 2.5GbE\n         VP2440 (OPNsense)\n          \u2502 SFP+ 1          \u2502 SFP+ 2\n          \u25bc                  \u25bc\n    CRS305 (Core)      CRS305 (DMZ) \u2190 NEW\n     \u2502    \u2502    \u2502         \u2502    \u2502    \u2502\n  CRS328 CRS309 [\u7a7a\u304d]  DMZ-1 DMZ-2 [\u7a7a\u304d]\n  Access  Lab           VLAN100\n</code></pre>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#2-mikrotik-crs305-1g-4sin","title":"2. \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2: MikroTik CRS305-1G-4S+IN","text":"\u9805\u76ee \u5024 \u578b\u756a CRS305-1G-4S+IN \u30dd\u30fc\u30c8 4x SFP+ 10G + 1x GbE\uff08\u7ba1\u7406\u7528\uff09 \u53c2\u8003\u4fa1\u683c ~\u00a52.5\u4e07\u5186 \u6d88\u8cbb\u96fb\u529b \u6700\u592712W\uff08\u30d5\u30a1\u30f3\u30ec\u30b9\uff09 \u30b9\u30a4\u30c3\u30c1\u30f3\u30b0\u5bb9\u91cf 82Gbps\uff08non-blocking\uff09 \u96fb\u6e90 DC \u30b8\u30e3\u30c3\u30af x2\uff08\u5197\u9577\uff09+ PoE-in\uff08GbE\uff09"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_8","title":"\u9078\u5b9a\u7406\u7531","text":"<ol> <li>\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3068\u540c\u4e00\u6a5f\u7a2e: \u30b9\u30da\u30a2\u30d1\u30fc\u30c4\u3068\u3057\u3066\u76f8\u4e92\u4ea4\u63db\u53ef\u80fd\u3002\u904b\u7528\u77e5\u8b58\u3082\u5171\u6709</li> <li>\u30dd\u30fc\u30c8\u6570\u304c\u6700\u9069: uplink 1 + PVE-DMZ-1 + PVE-DMZ-2 + \u4e88\u5099 1 = \u3061\u3087\u3046\u30694\u30dd\u30fc\u30c8</li> <li>\u30d5\u30a1\u30f3\u30ec\u30b9: \u30db\u30fc\u30e0\u30e9\u30dc\u3067\u9759\u97f3\u904b\u8ee2</li> <li>SwOS \u30e2\u30fc\u30c9\u904b\u7528: RouterOS \u3067\u306f\u306a\u304f SwOS\uff08\u7d14\u7c8b L2 \u30b9\u30a4\u30c3\u30c1\uff09\u3067\u52d5\u4f5c\u3055\u305b\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\u3092\u7121\u52b9\u5316\u3002RouterOS \u306e CVE \u30ea\u30b9\u30af\u3092\u5927\u5e45\u306b\u4f4e\u6e1b</li> <li>PoE \u7d66\u96fb\u5bfe\u5fdc: GbE \u30dd\u30fc\u30c8\u3067 PoE-in \u5bfe\u5fdc\u3002\u5c06\u6765\u7684\u306b CRS328 \u304b\u3089\u7d66\u96fb\u3059\u308c\u3070\u96fb\u6e90\u30b1\u30fc\u30d6\u30eb\u4e0d\u8981</li> </ol>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_9","title":"\u4ed6\u306e\u5019\u88dc\u3092\u9664\u5916\u3057\u305f\u7406\u7531","text":"\u5019\u88dc \u9664\u5916\u7406\u7531 CSS610-8G-2S+IN SFP+ \u304c2\u30dd\u30fc\u30c8\u306e\u307f\u3002uplink + PVE-DMZ-1 \u3067\u57cb\u307e\u308a\u3001PVE-DMZ-2 \u3092 10G \u63a5\u7d9a\u4e0d\u53ef CRS309-1G-8S+IN 8\u30dd\u30fc\u30c8\u306f DMZ \u306b\u904e\u5270\u3002\u4fa1\u683c\u3082\u7d042\u500d\uff08~\u00a54\u4e07\u5186\uff09 \u4ed6\u30e1\u30fc\u30ab\u30fc\uff08TP-Link \u7b49\uff09 MikroTik \u7d71\u4e00\u74b0\u5883\u306b\u7570\u306a\u308b\u30d9\u30f3\u30c0\u30fc\u3092\u6df7\u5165\u3059\u308b\u3068\u7ba1\u7406\u30b3\u30b9\u30c8\u5897\u3002SwOS/RouterOS \u3067\u306e\u7d71\u4e00\u7ba1\u7406\u3092\u7dad\u6301"},{"location":"decisions/005-dmz-network-isolation-2026-02/#3","title":"3. \u30dd\u30fc\u30c8\u5272\u308a\u5f53\u3066","text":""},{"location":"decisions/005-dmz-network-isolation-2026-02/#vp2440_1","title":"VP2440\uff08\u5909\u66f4\u5f8c\uff09","text":"\u30dd\u30fc\u30c8 \u7528\u9014 2.5GbE 1 WAN\uff08ONU\uff09 SFP+ 1 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\uff08\u5185\u90e8 VLAN trunk\uff09 SFP+ 2 DMZ \u30b9\u30a4\u30c3\u30c1\uff08VLAN 100 \u5c02\u7528\uff09 2.5GbE 2 \u4e88\u5099"},{"location":"decisions/005-dmz-network-isolation-2026-02/#crs305-4","title":"\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1 CRS305\uff08\u5909\u66f4\u5f8c \u2014 \u30dd\u30fc\u30c84\u304c\u7a7a\u304f\uff09","text":"\u30dd\u30fc\u30c8 \u7528\u9014 1 FW\uff08VP2440 SFP+ 1\uff09 2 \u30a2\u30af\u30bb\u30b9\u30b9\u30a4\u30c3\u30c1\uff08CRS328\uff09 3 \u30e9\u30dc\u30b9\u30a4\u30c3\u30c1\uff08CRS309\uff09 4 \u7a7a\u304d\uff08\u5c06\u6765\u62e1\u5f35\u7528\uff09"},{"location":"decisions/005-dmz-network-isolation-2026-02/#dmz-crs305","title":"DMZ \u30b9\u30a4\u30c3\u30c1 CRS305\uff08\u65b0\u898f\uff09","text":"\u30dd\u30fc\u30c8 \u7528\u9014 1 FW\uff08VP2440 SFP+ 2\uff09\u2014 uplink 2 PVE-DMZ-1\uff0810G\uff09 3 PVE-DMZ-2\uff0810G\u3001\u5c06\u6765\uff09 4 \u4e88\u5099 GbE \u7ba1\u7406\u30a2\u30af\u30bb\u30b9\uff08VLAN 90\uff09"},{"location":"decisions/005-dmz-network-isolation-2026-02/#4-swos","title":"4. SwOS \u30e2\u30fc\u30c9\u306e\u63a8\u5968","text":"<p>DMZ \u30b9\u30a4\u30c3\u30c1\u306f SwOS \u30e2\u30fc\u30c9\u3067\u904b\u7528\u3059\u308b\u3002</p> \u9805\u76ee RouterOS SwOS L3 \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0 \u3042\u308a \u306a\u3057 \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb \u3042\u308a \u306a\u3057 \u7ba1\u7406\u30d7\u30ed\u30c8\u30b3\u30eb SSH, API, WinBox, SNMP Web UI \u306e\u307f \u653b\u6483\u9762 \u5e83\u3044\uff08RouterOS CVE \u5bfe\u8c61\uff09 \u6700\u5c0f\uff08L2 \u30b9\u30a4\u30c3\u30c1\u30f3\u30b0 + Web UI\uff09 VLAN \u30bf\u30ae\u30f3\u30b0 \u3042\u308a \u3042\u308a <p>DMZ \u30b9\u30a4\u30c3\u30c1\u306b\u6c42\u3081\u3089\u308c\u308b\u306e\u306f VLAN 100 \u306e L2 \u30b9\u30a4\u30c3\u30c1\u30f3\u30b0\u306e\u307f\u3002RouterOS \u306e\u9ad8\u6a5f\u80fd\u306f\u4e0d\u8981\u3067\u3042\u308a\u3001\u653b\u6483\u9762\u3092\u6700\u5c0f\u5316\u3059\u308b\u305f\u3081\u306b SwOS \u304c\u9069\u5207\u3002</p>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#5-opnsense","title":"5. OPNsense \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u8a2d\u5b9a","text":"<p>VP2440 \u306e SFP+ 2 \u3092 DMZ \u5c02\u7528\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3068\u3057\u3066\u8a2d\u5b9a:</p> \u9805\u76ee \u5024 \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u540d <code>ix1</code>\uff08Intel X710 port 2\uff09 OPNsense \u4e0a\u306e\u540d\u524d <code>DMZ</code> IP \u30a2\u30c9\u30ec\u30b9 10.0.100.254/24 VLAN \u30bf\u30b0 \u306a\u3057\uff08\u30a2\u30f3\u30bf\u30b0\u30c9 \u2014 DMZ \u30b9\u30a4\u30c3\u30c1\u5168\u30dd\u30fc\u30c8\u304c VLAN 100\uff09 \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u30eb\u30fc\u30eb \u65e2\u5b58\u306e VLAN 100 \u30eb\u30fc\u30eb\u3092\u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u79fb\u884c <p>\u30a2\u30f3\u30bf\u30b0\u30c9\u904b\u7528\u306e\u7406\u7531: DMZ \u30b9\u30a4\u30c3\u30c1\u306b\u306f VLAN 100 \u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3057\u304b\u6d41\u308c\u306a\u3044\u305f\u3081\u3001VLAN \u30bf\u30ae\u30f3\u30b0\u306f\u4e0d\u8981\u3002\u8a2d\u5b9a\u3092\u7c21\u7d20\u5316\u3057\u3001\u30df\u30b9\u306e\u4f59\u5730\u3092\u6e1b\u3089\u3059\u3002</p>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_10","title":"\u7d50\u679c","text":"<ul> <li>\u7269\u7406\u5206\u96e2: DMZ \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3092\u4e00\u5207\u901a\u904e\u3057\u306a\u3044\u3002\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u4fb5\u5bb3\u6642\u306e DMZ \u3078\u306e\u5f71\u97ff\u3092\u30bc\u30ed\u306b\u3059\u308b</li> <li>VLAN \u30db\u30c3\u30d4\u30f3\u30b0\u8010\u6027: DMZ \u3068\u5185\u90e8 VLAN \u304c\u7269\u7406\u7684\u306b\u7570\u306a\u308b\u30b9\u30a4\u30c3\u30c1\u4e0a\u306b\u3042\u308b\u305f\u3081\u3001L2 \u653b\u6483\u7d4c\u8def\u304c\u5b58\u5728\u3057\u306a\u3044</li> <li>PVE-DMZ-2 \u62e1\u5f35: DMZ \u30b9\u30a4\u30c3\u30c1\u306e\u30dd\u30fc\u30c83\u306b 10G \u63a5\u7d9a\u53ef\u80fd\u3002IP <code>10.0.100.2</code> \u306f\u5272\u308a\u5f53\u3066\u6e08\u307f</li> <li>\u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u306e\u30dd\u30fc\u30c84\u89e3\u653e: \u5c06\u6765\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30bb\u30b0\u30e1\u30f3\u30c8\u8ffd\u52a0\uff08\u4f8b: \u7b2c2\u30e9\u30dc\u30b9\u30a4\u30c3\u30c1\u3001\u76e3\u8996\u5c02\u7528\u30bb\u30b0\u30e1\u30f3\u30c8\uff09\u306b\u4f7f\u7528\u53ef\u80fd</li> <li>\u653b\u6483\u9762\u306e\u6700\u5c0f\u5316: SwOS \u30e2\u30fc\u30c9\u904b\u7528\u306b\u3088\u308a RouterOS \u306e CVE \u30ea\u30b9\u30af\u304b\u3089 DMZ \u30b9\u30a4\u30c3\u30c1\u3092\u9694\u96e2</li> <li>\u904b\u7528\u4e00\u8cab\u6027: \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u3068\u540c\u4e00\u6a5f\u7a2e\uff08CRS305\uff09\u306e\u305f\u3081\u3001\u30b9\u30da\u30a2\u30d1\u30fc\u30c4\u5171\u6709\u30fb\u904b\u7528\u77e5\u8b58\u8ee2\u7528\u304c\u53ef\u80fd</li> <li>\u30b3\u30b9\u30c8: ~\u00a52.5\u4e07\u5186\uff08CRS305-1G-4S+IN\uff09+ SFP+ DAC \u30b1\u30fc\u30d6\u30eb ~\u00a53,000</li> <li>hardware.md \u4fee\u6b63: VP2440 \u306e\u30dd\u30fc\u30c8\u69cb\u6210\u3092\u5b9f\u969b\u306e\u4ed5\u69d8\uff082x 2.5GbE + 2x 10G SFP+\uff09\u306b\u4fee\u6b63</li> </ul>"},{"location":"decisions/005-dmz-network-isolation-2026-02/#_11","title":"\u4fb5\u5bb3\u30b7\u30ca\u30ea\u30aa\u6bd4\u8f03","text":"\u30b7\u30ca\u30ea\u30aa \u5909\u66f4\u524d\uff08\u30b3\u30a2SW\u76f4\u7d50\uff09 \u5909\u66f4\u5f8c\uff08DMZ SW FW\u76f4\u7d50\uff09 \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1 RouterOS \u8106\u5f31\u6027 DMZ \u3092\u542b\u3080\u5168 VLAN \u306e\u30d5\u30ec\u30fc\u30e0\u304c\u9732\u51fa DMZ \u306f\u7121\u95a2\u4fc2 DMZ \u30ce\u30fc\u30c9\u304b\u3089\u306e L2 \u6a2a\u5c55\u958b \u30b3\u30a2\u30b9\u30a4\u30c3\u30c1\u7d4c\u7531\u3067\u5185\u90e8 VLAN \u30d5\u30ec\u30fc\u30e0\u306b\u5230\u9054\u53ef\u80fd\u6027 FW \u3092\u7a81\u7834\u3057\u306a\u3044\u9650\u308a\u5185\u90e8\u5230\u9054\u4e0d\u53ef DMZ \u30b9\u30a4\u30c3\u30c1\u4fb5\u5bb3 N/A DMZ \u30bb\u30b0\u30e1\u30f3\u30c8\u5185\u306b\u9650\u5b9a FW \u4fb5\u5bb3 \u5168\u30bb\u30b0\u30e1\u30f3\u30c8\u5230\u9054\u53ef\u80fd \u5168\u30bb\u30b0\u30e1\u30f3\u30c8\u5230\u9054\u53ef\u80fd\uff08\u5909\u5316\u306a\u3057\uff09"},{"location":"decisions/005-dmz-network-isolation-2026-02/#adr","title":"\u95a2\u9023 ADR","text":"<ul> <li>ADR-001: VP2440 \u9078\u5b9a\u3001MikroTik \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6ce8\u610f\u4e8b\u9805</li> <li>ADR-003: VLAN 240 \u306e\u7269\u7406\u30b9\u30a4\u30c3\u30c1\u5206\u96e2\uff08CRS328 \u4e0a\u306b\u914d\u7f6e\uff09\u3001\u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u539f\u5247</li> </ul>"},{"location":"runbooks/","title":"\u904b\u7528\u624b\u9806\u66f8 (Runbooks)","text":"<p>\u30db\u30fc\u30e0\u30e9\u30dc\u306e\u904b\u7528\u624b\u9806\u3092\u8a18\u9332\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3002</p>"},{"location":"runbooks/#_1","title":"\u4e88\u5b9a\u3057\u3066\u3044\u308b\u624b\u9806\u66f8","text":"<ul> <li>[ ] disaster-recovery.md - \u969c\u5bb3\u5fa9\u65e7\u624b\u9806</li> <li>[ ] adding-a-vm.md - VM\u8ffd\u52a0\u624b\u9806</li> <li>[ ] adding-a-service.md - \u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\u624b\u9806</li> <li>[ ] firewall-rule-changes.md - \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u30eb\u30fc\u30eb\u5909\u66f4\u624b\u9806</li> <li>[ ] ceph-maintenance.md - Ceph\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u624b\u9806</li> </ul>"},{"location":"runbooks/disaster-recovery/","title":"\u969c\u5bb3\u5fa9\u65e7\u624b\u9806\u66f8","text":""},{"location":"runbooks/disaster-recovery/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>3\u5c64\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3053\u3068\uff08ADR-003\uff09</li> <li>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 (VLAN 240) \u304c\u6b63\u5e38\u306b\u65e5\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u3053\u3068</li> <li>YubiKey / Nitrokey / \u30aa\u30d5\u30e9\u30a4\u30f3USB age\u9375 \u306e\u3044\u305a\u308c\u304b\u304c\u624b\u5143\u306b\u3042\u308b\u3053\u3068</li> </ul>"},{"location":"runbooks/disaster-recovery/#_3","title":"\u30b7\u30ca\u30ea\u30aa\u5225\u5fa9\u65e7\u624b\u9806","text":""},{"location":"runbooks/disaster-recovery/#1-pve1","title":"\u30b7\u30ca\u30ea\u30aa1: PVE\u30ce\u30fc\u30c91\u53f0\u306e\u969c\u5bb3","text":"<p>\u5f71\u97ff: \u30b5\u30fc\u30d3\u30b9\u4e00\u90e8\u505c\u6b62\u3001Ceph\u306f\u5197\u9577\u52d5\u4f5c\u3092\u7d99\u7d9a</p> <pre><code>\u5fa9\u65e7\u624b\u9806:\n  1. \u7269\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u307e\u305f\u306fvPro(DMZ)\u3067\u539f\u56e0\u8abf\u67fb\n  2. \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u969c\u5bb3 \u2192 \u90e8\u54c1\u4ea4\u63db or \u4e88\u5099\u6a5f\u6295\u5165\n  3. \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u969c\u5bb3 \u2192 \u518d\u8d77\u52d5\u3067\u5fa9\u65e7\u3092\u8a66\u884c\n  4. Ceph OSD\u56de\u5fa9: ceph osd tree \u3067\u72b6\u614b\u78ba\u8a8d\n  5. \u8a72\u5f53\u30ce\u30fc\u30c9\u306eDocker\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\n\n\u5fa9\u65e7\u6642\u9593: 30\u5206\u301c2\u6642\u9593\n\u30c7\u30fc\u30bf\u640d\u5931: \u306a\u3057\uff08Ceph\u5197\u9577\u5316\u3067\u4fdd\u8b77\uff09\n</code></pre>"},{"location":"runbooks/disaster-recovery/#2-pve","title":"\u30b7\u30ca\u30ea\u30aa2: PVE\u5168\u30ce\u30fc\u30c9\u540c\u6642\u969c\u5bb3\uff08\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af\uff09","text":"<p>\u5f71\u97ff: \u5168\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\u3001Ceph\u30af\u30e9\u30b9\u30bf\u505c\u6b62</p> <pre><code>\u5fa9\u65e7\u624b\u9806:\n\nPhase 1: \u72b6\u614b\u78ba\u8a8d (10\u5206)\n  1. OPNsense WebUI (10.0.90.254) \u2192 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6b63\u5e38\u6027\u78ba\u8a8d\n  2. \u5404\u30ce\u30fc\u30c9\u306b\u7269\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u63a5\u7d9a\n     - PVE-DMZ-1: vPro (Intel AMT) \u3067\u30ea\u30e2\u30fc\u30c8KVM\n     - PVE-3: \u7269\u7406HDMI+KB\u63a5\u7d9a\n     - PVE-1/2: \u7269\u7406HDMI+KB\u63a5\u7d9a\n  3. dmesg / journalctl \u3067\u30d1\u30cb\u30c3\u30af\u539f\u56e0\u3092\u7279\u5b9a\n\nPhase 2: \u9806\u6b21\u518d\u8d77\u52d5 (30\u5206\u301c1\u6642\u9593)\n  \u512a\u5148\u9806\u4f4d:\n    1st: PVE-3 (Ceph Monitor) \u2192 Ceph\u30af\u30e9\u30b9\u30bf\u306e\u982d\u8133\n    2nd: PVE-1, PVE-2 (Ceph OSD) \u2192 \u30b9\u30c8\u30ec\u30fc\u30b8\u5b9f\u4f53\n    3rd: PVE-GPU, PVE-DMZ-1 \u2192 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3067\u306a\u3044\u30b5\u30fc\u30d3\u30b9\n\nPhase 3: Ceph\u56de\u5fa9\u78ba\u8a8d (10\u5206)\n  $ ceph status\n  $ ceph osd tree\n  $ ceph health detail\n  \u2192 HEALTH_OK or HEALTH_WARN (recovering) \u306a\u3089\u6210\u529f\n\nPhase 4: \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5 (30\u5206)\n  \u5404\u30ce\u30fc\u30c9\u3067 docker compose up -d\n\n\u5fa9\u65e7\u6642\u9593: 1\u301c3\u6642\u9593\n\u30c7\u30fc\u30bf\u640d\u5931: Ceph\u56de\u5fa9\u6210\u529f\u306a\u3089\u306a\u3057\n</code></pre> <p>Ceph\u56de\u5fa9\u5931\u6557\u306e\u5834\u5408: \u2192 \u30b7\u30ca\u30ea\u30aa4\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304b\u3089\u306e\u5b8c\u5168\u5fa9\u65e7\uff09\u3078</p>"},{"location":"runbooks/disaster-recovery/#3-github","title":"\u30b7\u30ca\u30ea\u30aa3: GitHub\u5168\u60c5\u5831\u6f0f\u6d29","text":"<p>\u5f71\u97ff: \u30b3\u30fc\u30c9\u30fb\u8a2d\u8a08\u60c5\u5831\u30fb\u6697\u53f7\u5316\u6e08\u307f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304c\u653b\u6483\u8005\u306b\u516c\u958b</p> <pre><code>\u5373\u6642\u5bfe\u5fdc (30\u5206\u4ee5\u5185):\n\n  1. Cloudflare Dashboard\n     - \u65e2\u5b58\u30c8\u30f3\u30cd\u30eb\u3092\u524a\u9664 \u2192 \u65b0\u898f\u30c8\u30f3\u30cd\u30eb\u4f5c\u6210\n     - CF Access \u30dd\u30ea\u30b7\u30fc\u3067\u5168\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u4e00\u6642\u30d6\u30ed\u30c3\u30af\n\n  2. GitHub\n     - Settings \u2192 Developer Settings \u2192 Personal Access Tokens \u2192 \u5168revoke\n     - Settings \u2192 SSH and GPG keys \u2192 \u5168\u524a\u9664 \u2192 \u65b0\u3057\u3044\u9375\u3092\u767b\u9332\n     - Repository Settings \u2192 Secrets \u2192 \u5168\u524a\u9664\n     - \u65b0\u3057\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304b\u3089push\n\n  3. Tailscale\n     - Admin Console \u2192 Devices \u2192 \u4e0d\u5be9\u306a\u30ce\u30fc\u30c9\u304c\u306a\u3044\u304b\u78ba\u8a8d\n     - \u5fc5\u8981\u306b\u5fdc\u3058\u3066auth key\u3092revoke\n\n  4. \u30b5\u30fc\u30d3\u30b9\u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u56de\u8ee2\n     \u203b SOPS\u3067\u6697\u53f7\u5316\u6e08\u307f\u306e\u305f\u3081\u5e73\u6587\u306f\u6f0f\u6d29\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u5ff5\u306e\u305f\u3081\u56de\u8ee2:\n     - Cloudflare Tunnel Token\n     - Vaultwarden Admin Token\n     - Grafana Admin Password\n     - Pterodactyl DB Passwords\n\n     sops secrets/lab.sops.yml  # \u5404\u30c8\u30fc\u30af\u30f3\u3092\u518d\u751f\u6210\u3057\u3066\u4fdd\u5b58\n     # \u5404\u30b5\u30fc\u30d3\u30b9\u306e .env \u3092\u66f4\u65b0\u3057\u3066\u518d\u8d77\u52d5\n\n\u5f8c\u7d9a\u5bfe\u5fdc:\n  5. \u6f0f\u6d29\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\u60c5\u5831\u306e\u8a55\u4fa1\n     - VLAN\u8a2d\u8a08\u3001IP\u30a2\u30c9\u30ec\u30b9\u4f53\u7cfb \u2192 \u5916\u90e8\u304b\u3089\u306f\u5230\u9054\u4e0d\u53ef\u80fd\u306a\u305f\u3081\u5373\u6642\u30ea\u30b9\u30af\u306f\u4f4e\u3044\n     - \u5fc5\u8981\u306b\u5fdc\u3058\u3066IP\u30a2\u30c9\u30ec\u30b9\u4f53\u7cfb\u3092\u5909\u66f4\uff08\u512a\u5148\u5ea6\u4f4e\uff09\n\n  6. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306eGitHub\u8a8d\u8a3c\u60c5\u5831\u3092\u66f4\u65b0\n     - \u65b0\u3057\u3044deploy key\u3092\u751f\u6210\n     - rclone / git remote \u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\n\n\u30c7\u30fc\u30bf\u640d\u5931: \u306a\u3057\n</code></pre>"},{"location":"runbooks/disaster-recovery/#4-pve-ceph","title":"\u30b7\u30ca\u30ea\u30aa4: PVE\u5168\u6ec5 + Ceph\u58ca\u6ec5\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304b\u3089\u306e\u5b8c\u5168\u5fa9\u65e7\uff09","text":"<p>\u5f71\u97ff: \u5168\u30b5\u30fc\u30d3\u30b9\u30fb\u5168\u30c7\u30fc\u30bf\u55aa\u5931\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304b\u3089\u306e\u5fa9\u65e7\u304c\u5fc5\u8981</p> <pre><code>\u524d\u63d0: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9 (10.0.240.2) \u304c\u6b63\u5e38\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3053\u3068\n\nPhase 1: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304b\u3089\u30b3\u30fc\u30c9\u53d6\u5f97 (10\u5206)\n  \u7ba1\u7406PC \u304b\u3089:\n  $ ssh admin@10.0.240.2\n  $ ls /srv/backup/git-mirrors/   # \u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7\u78ba\u8a8d\n  $ ls /srv/backup/restic/        # \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u4e00\u89a7\u78ba\u8a8d\n\n  \u7ba1\u7406PC \u3067:\n  $ git clone backup-node:/srv/backup/git-mirrors/homelab.git\n\nPhase 2: Proxmox\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (2\u301c4\u6642\u9593)\n  1. PVE-3: Proxmox VE \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (USB\u8d77\u52d5)\n  2. PVE-1: Proxmox VE \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  3. PVE-2: Proxmox VE \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  4. Ceph\u30af\u30e9\u30b9\u30bf\u518d\u69cb\u7bc9 (\u7a7a\u306e\u30af\u30e9\u30b9\u30bf)\n  5. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a (VLAN trunk, bond)\n\nPhase 3: \u30c7\u30fc\u30bf\u5fa9\u5143 (30\u5206\u301c1\u6642\u9593)\n  \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304b\u3089 SSH \u3067\u53d6\u5f97\uff08\u7ba1\u7406PC\u7d4c\u7531\uff09:\n\n  # Vaultwarden DB\n  $ ssh backup@backup-node\n  $ restic -r /srv/backup/restic/vaultwarden snapshots  # \u4e00\u89a7\u78ba\u8a8d\n  $ restic -r /srv/backup/restic/vaultwarden restore latest \\\n      --target /tmp/restore/vaultwarden/\n\n  # \u30b2\u30fc\u30e0\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\n  $ restic -r /srv/backup/restic/gamedata restore latest \\\n      --target /tmp/restore/gamedata/\n\n  # Pterodactyl DB\n  $ restic -r /srv/backup/restic/pterodactyl restore latest \\\n      --target /tmp/restore/pterodactyl/\n\n  # \u5fa9\u5143\u30c7\u30fc\u30bf\u3092\u7ba1\u7406PC\u3078\u8ee2\u9001\n  $ scp -r /tmp/restore/ admin-pc:/tmp/restore/\n\nPhase 4: \u30b5\u30fc\u30d3\u30b9\u518d\u30c7\u30d7\u30ed\u30a4 (1\u301c2\u6642\u9593)\n  1. SOPS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u5fa9\u53f7 (YubiKey\u30bf\u30c3\u30c1)\n     $ sops --decrypt secrets/lab.sops.yml &gt; /tmp/.env.lab\n\n  2. \u5404\u30b5\u30fc\u30d3\u30b9\u306e Docker Compose \u8d77\u52d5\n     $ docker compose -f docker/lab/vaultwarden/docker-compose.yml up -d\n     $ docker compose -f docker/lab/forgejo/docker-compose.yml up -d\n     $ docker compose -f docker/lab/monitoring/docker-compose.yml up -d\n     $ docker compose -f docker/lab/pterodactyl/panel/docker-compose.yml up -d\n     $ docker compose -f docker/lab/pterodactyl/wings/docker-compose.yml up -d\n     $ docker compose -f docker/lab/cloudflared/docker-compose.yml up -d\n\n  3. \u5fa9\u5143\u30c7\u30fc\u30bf\u306e\u30de\u30a6\u30f3\u30c8\n     - Vaultwarden: sqlite3 DB \u3092 vaultwarden-data \u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u30b3\u30d4\u30fc\n     - Pterodactyl: mysqldump \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\n     - Wings: \u30b2\u30fc\u30e0\u30c7\u30fc\u30bf\u3092 /var/lib/pterodactyl/volumes/ \u306b\u30b3\u30d4\u30fc\n\n  4. Cloudflare Tunnel \u306e\u518d\u8a2d\u5b9a\n     - \u65b0\u3057\u3044\u30c8\u30f3\u30cd\u30eb\u4f5c\u6210 \u2192 \u30c8\u30fc\u30af\u30f3\u53d6\u5f97 \u2192 .env \u66f4\u65b0\n\n  5. Forgejo \u306e\u5fa9\u65e7\n     - \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u306e git mirror \u304b\u3089\u521d\u671f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5fa9\u5143\n\nPhase 5: \u52d5\u4f5c\u78ba\u8a8d (30\u5206)\n  - Vaultwarden: \u30d6\u30e9\u30a6\u30b6\u62e1\u5f35\u6a5f\u80fd\u3067\u30ed\u30b0\u30a4\u30f3\u30c6\u30b9\u30c8\n  - \u30b2\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc: Minecraft\u63a5\u7d9a\u30c6\u30b9\u30c8\n  - \u76e3\u8996: Grafana \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\n  - \u5916\u90e8\u30a2\u30af\u30bb\u30b9: Cloudflare Tunnel \u7d4c\u7531\u3067\u63a5\u7d9a\u78ba\u8a8d\n\n\u5408\u8a08\u5fa9\u65e7\u6642\u9593: \u7d044\u301c8\u6642\u9593\n\u30c7\u30fc\u30bf\u640d\u5931: \u6700\u592724\u6642\u9593\u5206\uff08\u524d\u65e5\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6642\u70b9\u307e\u3067\u5fa9\u5143\uff09\n</code></pre>"},{"location":"runbooks/disaster-recovery/#5-github-pve","title":"\u30b7\u30ca\u30ea\u30aa5: GitHub\u5168\u6f0f\u6d29 + PVE\u5168\u6ec5\uff08\u540c\u6642\u767a\u751f\uff09","text":"<p>\u5f71\u97ff: \u6700\u60aa\u306e\u30b7\u30ca\u30ea\u30aa\u3002\u30b3\u30fc\u30c9\u6f0f\u6d29 + \u5168\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30fc\u30bf\u55aa\u5931</p> <pre><code>\u5bfe\u5fdc\u9806\u5e8f:\n\n  1. \u30b7\u30ca\u30ea\u30aa3\u306e\u5373\u6642\u5bfe\u5fdc\u3092\u5b9f\u884c\uff08\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u56de\u8ee2\uff09\n     \u2192 PVE\u304c\u6b7b\u3093\u3067\u3044\u308b\u306e\u3067\u30b5\u30fc\u30d3\u30b9\u5074\u306e\u56de\u8ee2\u306f\u5f8c\u56de\u3057\n     \u2192 Cloudflare/GitHub/Tailscale \u306e\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u306e\u307f\u5148\u306b\u5bfe\u5fdc\n\n  2. \u30b7\u30ca\u30ea\u30aa4\u306e\u5fa9\u65e7\u624b\u9806\u3092\u5b9f\u884c\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304b\u3089\u306e\u5b8c\u5168\u5fa9\u65e7\uff09\n     \u2192 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u304b\u3089\u30b3\u30fc\u30c9\u3068\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n\n  3. \u5fa9\u65e7\u5f8c\u306b\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u56de\u8ee2\u3092\u5b8c\u4e86\n     \u2192 SOPS\u3067\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\n     \u2192 \u5404\u30b5\u30fc\u30d3\u30b9\u306b\u9069\u7528\n\n\u5408\u8a08\u5fa9\u65e7\u6642\u9593: \u7d045\u301c9\u6642\u9593\n\u30c7\u30fc\u30bf\u640d\u5931: \u6700\u592724\u6642\u9593\u5206\n</code></pre>"},{"location":"runbooks/disaster-recovery/#6","title":"\u30b7\u30ca\u30ea\u30aa6: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u969c\u5bb3","text":"<p>\u5f71\u97ff: \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u53d6\u5f97\u304c\u505c\u6b62\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u306b\u306f\u5f71\u97ff\u306a\u3057\uff09</p> <pre><code>\u691c\u77e5:\n  - Discord/LINE\u901a\u77e5\u304c3\u65e5\u9593\u6765\u306a\u3044 \u2192 dead man's switch \u767a\u52d5\n  - VLAN 90 \u304b\u3089 SSH \u63a5\u7d9a\u4e0d\u53ef\n\n\u5fa9\u65e7:\n  1. \u7269\u7406\u78ba\u8a8d\uff08\u96fb\u6e90\u3001SSD\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b1\u30fc\u30d6\u30eb\uff09\n  2. \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u6545\u969c \u2192 \u65b0\u3057\u3044Pi/\u30df\u30cbPC\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n  3. Ansible\u30d7\u30ec\u30a4\u30d6\u30c3\u30af\u3067\u518d\u69cb\u6210\n  4. Tier 3 (R2) \u304b\u3089 restic \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5fa9\u5143\n     $ rclone sync r2:homelab-backup/restic/ /srv/backup/restic/\n  5. git mirror \u3092 Forgejo \u304b\u3089\u518d\u53d6\u5f97\n     $ git clone --mirror ssh://forgejo@10.0.200.11/repo.git\n\n\u5fa9\u65e7\u6642\u9593: 1\u301c2\u6642\u9593\uff08\u65b0HW\u8abf\u9054\u6e08\u307f\u306e\u5834\u5408\uff09\n\u30c7\u30fc\u30bf\u640d\u5931: \u306a\u3057\uff08\u30d7\u30e9\u30a4\u30de\u30ea\u304c\u7a3c\u50cd\u4e2d\uff09\n</code></pre>"},{"location":"runbooks/disaster-recovery/#7","title":"\u30b7\u30ca\u30ea\u30aa7: \u81ea\u5b85\u7269\u7406\u707d\u5bb3\uff08\u706b\u707d\u30fb\u6c34\u5bb3\uff09","text":"<p>\u5f71\u97ff: \u5168\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u55aa\u5931</p> <pre><code>\u524d\u63d0: Tier 3 (R2 + GitHub) \u306b\u30aa\u30d5\u30b5\u30a4\u30c8\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\n\n\u5fa9\u65e7:\n  1. \u65b0\u3057\u3044\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3092\u8abf\u9054\n  2. R2\u304b\u3089restic\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n     $ rclone sync r2:homelab-backup/restic/ /tmp/restore/restic/\n  3. GitHub\u304b\u3089IaC\u30b3\u30fc\u30c9\u3092clone\n  4. \u4ee5\u964d\u306f\u30b7\u30ca\u30ea\u30aa4\u306ePhase 2\u301c5\u306b\u6e96\u3058\u308b\n\n\u5fa9\u65e7\u6642\u9593: HW\u8abf\u9054\u5f8c 4\u301c8\u6642\u9593\n\u30c7\u30fc\u30bf\u640d\u5931: \u6700\u592724\u6642\u9593\u5206\n</code></pre>"},{"location":"runbooks/disaster-recovery/#_4","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u691c\u8a3c\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8\uff08\u6708\u6b21\uff09","text":"# \u9805\u76ee \u624b\u9806 \u671f\u5f85\u7d50\u679c 1 restic \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u4e00\u89a7 <code>restic snapshots</code> daily 30 + weekly 12 + monthly 12 \u4ee5\u5185 2 Vaultwarden DB \u5fa9\u5143\u30c6\u30b9\u30c8 <code>restic restore latest</code> \u2192 <code>sqlite3 PRAGMA integrity_check</code> <code>ok</code> 3 \u30b2\u30fc\u30e0\u30c7\u30fc\u30bf \u5fa9\u5143\u30c6\u30b9\u30c8 <code>restic restore latest</code> \u2192 tar \u5c55\u958b \u2192 \u30d5\u30a1\u30a4\u30eb\u6570\u78ba\u8a8d \u671f\u5f85\u30d5\u30a1\u30a4\u30eb\u6570\u3068\u4e00\u81f4 4 Git \u30df\u30e9\u30fc\u6574\u5408\u6027 <code>git fsck --full</code> \u30a8\u30e9\u30fc\u306a\u3057 5 R2 \u540c\u671f\u78ba\u8a8d <code>rclone check /srv/backup/restic/ r2:homelab-backup/restic/</code> \u5dee\u5206\u306a\u3057 6 \u30c7\u30a3\u30b9\u30af\u6b8b\u91cf <code>df -h /srv/backup/</code> 20% \u4ee5\u4e0a\u306e\u7a7a\u304d 7 \u30a2\u30e9\u30fc\u30c8\u901a\u77e5\u30c6\u30b9\u30c8 \u30c6\u30b9\u30c8\u901a\u77e5\u9001\u4fe1 Discord/LINE \u306b\u5230\u9054"}]}